<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daƒü M…ôlumatlarƒ± | PeakExplorer</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-dark">
        <a href="index (2).html" class="logo" onclick="if(window.location.pathname.includes('index')) { location.reload(); return false; }">
            <span class="logo-icon">‚õ∞Ô∏è</span>
            <span class="logo-text">PeakExplorer</span>
        </a>
        <ul class="nav-links">
            <li><a href="index (2).html">Ana S…ôhif…ô</a></li>
            <li><a href="index (2).html#mountains">Daƒülar</a></li>
            <li class="nav-dropdown-item">
                <a href="index (2).html#tours" class="nav-dropdown-trigger">Turlar ‚ñæ</a>
                <div class="nav-submenu">
                    <a href="index (2).html#tours" class="submenu-item">
                        <span class="submenu-icon">üåü</span>
                        <span>Popular Turlar</span>
                    </a>
                    <a href="hotels.html" class="submenu-item">
                        <span class="submenu-icon">üè®</span>
                        <span>Otell…ôr</span>
                    </a>
                    <a href="restaurants.html" class="submenu-item">
                        <span class="submenu-icon">üçΩÔ∏è</span>
                        <span>Restoranlar</span>
                    </a>
                    <a href="car-rental.html" class="submenu-item">
                        <span class="submenu-icon">üöó</span>
                        <span>Ma≈üƒ±n Kiray…ôsi</span>
                    </a>
                </div>
            </li>
            <li><a href="index (2).html#map">X…ôrit…ô</a></li>
            <li><a href="index (2).html#gallery">Qalereya</a></li>
        </ul>
        <div class="nav-actions">
            <!-- Search -->
            <div class="nav-search">
                <button class="search-toggle-btn" title="Axtar">üîç</button>
            </div>
            
            <!-- Menu Dropdown -->
            <div class="nav-dropdown menu-dropdown">
                <button class="nav-dropdown-btn">
                    <span>‚ò∞</span>
                    <span>Menyu</span>
                </button>
                <div class="nav-dropdown-content">
                    <a href="about.html">Haqqƒ±mƒ±zda</a>
                    <a href="contact.html">∆èlaq…ô</a>
                    <a href="blog.html">Blog</a>
                    <a href="faq.html">FAQ</a>
                </div>
            </div>
            
            <!-- Dil se√ßimi Dropdown -->
            <div class="nav-dropdown lang-dropdown">
                <button class="nav-dropdown-btn">
                    <span class="lang-current">AZ</span>
                </button>
                <div class="nav-dropdown-content">
                    <button class="lang-option active" data-lang="az">
                        <span class="lang-flag">üá¶üáø</span>
                        <span>Az…ôrbaycan</span>
                    </button>
                    <button class="lang-option" data-lang="en">
                        <span class="lang-flag">üá¨üáß</span>
                        <span>English</span>
                    </button>
                    <button class="lang-option" data-lang="ru">
                        <span class="lang-flag">üá∑üá∫</span>
                        <span>–†—É—Å—Å–∫–∏–π</span>
                    </button>
                    <button class="lang-option" data-lang="tr">
                        <span class="lang-flag">üáπüá∑</span>
                        <span>T√ºrk√ße</span>
                    </button>
                </div>
            </div>
            
            <!-- Auth buttons -->
            <div class="auth-buttons" id="authButtons">
                <button class="auth-btn login-btn" onclick="window.location.href='index (2).html'">Giri≈ü</button>
                <button class="auth-btn signup-btn" onclick="window.location.href='index (2).html'">Qeydiyyat</button>
            </div>
            
            <!-- User profile dropdown (giri≈ü edildikd…ôn sonra) -->
            <div class="nav-dropdown user-dropdown" id="userProfile" style="display: none;">
                <button class="nav-dropdown-btn user-dropdown-btn" id="userDropdownBtn">
                    <span class="user-avatar" id="userAvatarNav">üë§</span>
                    <span class="user-name" id="userName"></span>
                </button>
                <div class="nav-dropdown-content" id="userDropdownContent">
                    <a href="profile.html" class="dropdown-item">
                        <span>üë§</span>
                        <span>Profil</span>
                    </a>
                    <button class="dropdown-item logout-item" id="logoutBtn">
                        <span>üö™</span>
                        <span>√áƒ±xƒ±≈ü</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mountain Hero -->
    <section class="mountain-hero" id="mountainHero">
        <div class="hero-overlay"></div>
        <div class="mountain-hero-content">
            <span class="back-link">
                <a href="index (2).html#map">‚Üê X…ôrit…ôy…ô Qayƒ±t</a>
            </span>
            <h1 id="heroMountainName">Daƒü Adƒ±</h1>
            <div class="hero-meta">
                <span class="hero-altitude" id="heroAltitude">
                    <span class="meta-icon">üìè</span> 0000 m
                </span>
                <span class="hero-difficulty" id="heroDifficulty">
                    <span class="meta-icon">‚ö°</span> √á…ôtinlik
                </span>
            </div>
            
            <!-- Current Weather Widget -->
            <div class="weather-widget" id="weatherWidget">
                <div class="weather-current" id="weatherCurrent">
                    <div class="weather-icon" id="weatherIcon">üå§Ô∏è</div>
                    <div class="weather-info">
                        <span class="weather-temp" id="weatherTemp">--¬∞C</span>
                        <span class="weather-desc" id="weatherDesc">Y√ºkl…ônir...</span>
                    </div>
                </div>
                <div class="weather-forecast" id="weatherForecast">
                    <!-- 7 g√ºnl√ºk proqnoz hover zamanƒ± g√∂st…ôril…ôc…ôk -->
                </div>
            </div>
        </div>
    </section>

    <!-- Mountain Description -->
    <section class="mountain-description-section">
        <div class="container">
            <div class="description-grid">
                <div class="description-main">
                    <h2>Haqqƒ±nda</h2>
                    <p id="mountainFullDescription">
                        Daƒü haqqƒ±nda …ôtraflƒ± m…ôlumat...
                    </p>
                    
                    <div class="quick-info">
                        <div class="quick-info-item">
                            <span class="qi-icon">üèîÔ∏è</span>
                            <div>
                                <strong>H√ºnd√ºrl√ºk</strong>
                                <span id="qiAltitude">0000 m</span>
                            </div>
                        </div>
                        <div class="quick-info-item">
                            <span class="qi-icon">üìç</span>
                            <div>
                                <strong>Rayon</strong>
                                <span id="qiLocation">M…ôkan</span>
                            </div>
                        </div>
                        <div class="quick-info-item">
                            <span class="qi-icon">‚è±Ô∏è</span>
                            <div>
                                <strong>∆èn yax≈üƒ± vaxt</strong>
                                <span id="qiBestTime">May - Sentyabr</span>
                            </div>
                        </div>
                        <div class="quick-info-item">
                            <span class="qi-icon">üë•</span>
                            <div>
                                <strong>Qrup √∂l√ß√ºs√º</strong>
                                <span id="qiGroupSize">5-15 n…ôf…ôr</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="description-sidebar">
                    <div class="booking-card">
                        <h3>Tur Sifari≈ü Et</h3>
                        <div class="booking-price">
                            <span class="price-amount" id="tourPrice">‚Çº350</span>
                            <span class="price-from">-d…ôn ba≈ülayaraq</span>
                        </div>
                        <button class="booking-btn" onclick="openTourBookingModal()">ƒ∞ndi Sifari≈ü Et</button>
                        <p class="booking-note">‚úì Pulsuz l…ôƒüv imkanƒ±</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hotels Section -->
    <section class="details-section hotels-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">Gec…ôl…ôm…ô</span>
                <h2 class="section-title">üè® Yaxƒ±n Otell…ôr</h2>
            </div>
            
            <div class="details-grid" id="hotelsGrid">
                <!-- Hotels will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Restaurants Section -->
    <section class="details-section restaurants-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">Qidalanma</span>
                <h2 class="section-title">üçΩÔ∏è Restoranlar</h2>
            </div>
            
            <div class="details-grid" id="restaurantsGrid">
                <!-- Restaurants will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Activities Section -->
    <section class="details-section activities-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">∆èyl…ônc…ô</span>
                <h2 class="section-title">üéØ F…ôaliyy…ôtl…ôr</h2>
            </div>
            
            <div class="activities-grid" id="activitiesGrid">
                <!-- Activities will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Transport Section -->
    <section class="details-section transport-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">√áatma yollarƒ±</span>
                <h2 class="section-title">üöó N…ôqliyyat</h2>
            </div>
            
            <div class="transport-grid" id="transportGrid">
                <!-- Transport options will be loaded dynamically -->
            </div>
            
            <div class="route-info-cards" id="routeInfoCards">
                <!-- Route info will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Restaurant Modal -->
    <div class="restaurant-modal" id="restaurantModal">
        <div class="restaurant-modal-content">
            <button class="modal-close" id="closeRestaurantModal">‚úï</button>
            
            <div class="restaurant-image" id="restModalImage"></div>
            
            <div class="restaurant-details">
                <div class="rest-header">
                    <h2 id="restModalName">Restoran Adƒ±</h2>
                    <div class="rest-rating">
                        <span class="rating-stars" id="restModalStars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                        <span class="rating-number" id="restModalRating">4.5</span>
                    </div>
                </div>
                
                <div class="rest-tags">
                    <span class="rest-cuisine" id="restModalCuisine">M…ôtb…ôx</span>
                    <span class="rest-price" id="restModalPrice">‚Çº‚Çº</span>
                </div>
                
                <p class="rest-description" id="restModalDescription">
                    Restoran haqqƒ±nda m…ôlumat...
                </p>
                
                <div class="rest-info-grid">
                    <div class="rest-info-item">
                        <span class="info-icon">üìç</span>
                        <div>
                            <strong>√únvan</strong>
                            <p id="restModalAddress">√únvan</p>
                        </div>
                    </div>
                    <div class="rest-info-item">
                        <span class="info-icon">üìû</span>
                        <div>
                            <strong>Telefon</strong>
                            <p id="restModalPhone">+994 XX XXX XX XX</p>
                        </div>
                    </div>
                    <div class="rest-info-item">
                        <span class="info-icon">üïê</span>
                        <div>
                            <strong>ƒ∞≈ü saatlarƒ±</strong>
                            <p id="restModalHours">09:00 - 22:00</p>
                        </div>
                    </div>
                </div>
                
                <div class="rest-features">
                    <h4>X√ºsusiyy…ôtl…ôr</h4>
                    <div class="features-list" id="restModalFeatures">
                        <!-- Features will be loaded dynamically -->
                    </div>
                </div>
                
                <div class="rest-actions">
                    <a href="#" class="rest-action-btn call-btn" id="restCallBtn">
                        <span>üìû</span> Z…ông Et
                    </a>
                    <a href="#" class="rest-action-btn directions-btn" id="restDirectionsBtn" target="_blank">
                        <span>üó∫Ô∏è</span> Yol Tarifi
                    </a>
                    <button class="rest-action-btn reserve-btn" id="restReserveBtn">
                        <span>üìÖ</span> Masa Rezerv Et
                    </button>
                </div>
            </div>
            
            <!-- Reservation Form -->
            <div class="reservation-form" id="reservationForm" style="display: none;">
                <h3>üìÖ Masa Rezervasiyasƒ±</h3>
                <form id="tableReservationForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Tarix</label>
                            <input type="date" id="reserveDate" required>
                        </div>
                        <div class="form-group">
                            <label>Saat</label>
                            <select id="reserveTime" required>
                                <option value="">Se√ßin</option>
                                <option value="12:00">12:00</option>
                                <option value="13:00">13:00</option>
                                <option value="14:00">14:00</option>
                                <option value="18:00">18:00</option>
                                <option value="19:00">19:00</option>
                                <option value="20:00">20:00</option>
                                <option value="21:00">21:00</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Qonaq Sayƒ±</label>
                            <select id="reserveGuests" required>
                                <option value="1">1 n…ôf…ôr</option>
                                <option value="2" selected>2 n…ôf…ôr</option>
                                <option value="3">3 n…ôf…ôr</option>
                                <option value="4">4 n…ôf…ôr</option>
                                <option value="5">5 n…ôf…ôr</option>
                                <option value="6">6+ n…ôf…ôr</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ad Soyad</label>
                            <input type="text" id="reserveName" required placeholder="Adƒ±nƒ±z">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Telefon</label>
                        <input type="tel" id="reservePhone" required placeholder="+994 XX XXX XX XX">
                    </div>
                    <div class="form-group">
                        <label>Qeyd (opsional)</label>
                        <textarea id="reserveNote" rows="2" placeholder="X√ºsusi ist…ôkl…ôr..."></textarea>
                    </div>
                    <div class="reservation-actions">
                        <button type="button" class="cancel-reserve-btn" id="cancelReserve">L…ôƒüv Et</button>
                        <button type="submit" class="confirm-reserve-btn">Rezerv Et</button>
                    </div>
                </form>
            </div>
            
            <!-- Reservation Confirmation -->
            <div class="reservation-confirmed" id="reservationConfirmed" style="display: none;">
                <div class="confirm-icon">‚úì</div>
                <h3>Rezervasiya Q…ôbul Edildi!</h3>
                <p>T…ôsdiq √º√ß√ºn restoran sizinl…ô …ôlaq…ô saxlayacaq.</p>
                <div class="confirm-details">
                    <p><strong>Restoran:</strong> <span id="confirmRestName">-</span></p>
                    <p><strong>Tarix:</strong> <span id="confirmDate">-</span></p>
                    <p><strong>Saat:</strong> <span id="confirmTime">-</span></p>
                    <p><strong>Qonaq:</strong> <span id="confirmGuests">-</span></p>
                </div>
                <button class="close-confirm-btn" onclick="closeRestaurantModal()">Baƒüla</button>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-modal-content">
            <button class="modal-close" id="closeBookingModal">‚úï</button>
            
            <!-- Step 1: Booking Details -->
            <div class="booking-step" id="bookingStep1">
                <div class="modal-header">
                    <h2>üè® Otel Sifari≈üi</h2>
                    <p id="selectedHotelName">Otel adƒ±</p>
                </div>
                
                <form class="booking-form" id="hotelBookingForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Giri≈ü Tarixi</label>
                            <input type="date" id="checkInDate" required>
                        </div>
                        <div class="form-group">
                            <label>√áƒ±xƒ±≈ü Tarixi</label>
                            <input type="date" id="checkOutDate" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Qonaq Sayƒ±</label>
                            <select id="guestCount" required>
                                <option value="1">1 n…ôf…ôr</option>
                                <option value="2" selected>2 n…ôf…ôr</option>
                                <option value="3">3 n…ôf…ôr</option>
                                <option value="4">4 n…ôf…ôr</option>
                                <option value="5">5+ n…ôf…ôr</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Otaq Sayƒ±</label>
                            <select id="roomCount" required>
                                <option value="1" selected>1 otaq</option>
                                <option value="2">2 otaq</option>
                                <option value="3">3 otaq</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Ad Soyad</label>
                        <input type="text" id="guestName" required placeholder="Tam adƒ±nƒ±z">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>E-po√ßt</label>
                            <input type="email" id="guestEmail" required placeholder="email@example.com">
                        </div>
                        <div class="form-group">
                            <label>Telefon</label>
                            <input type="tel" id="guestPhone" required placeholder="+994 XX XXX XX XX">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>X√ºsusi ƒ∞st…ôkl…ôr (opsional)</label>
                        <textarea id="specialRequests" rows="2" placeholder="∆èlav…ô ist…ôkl…ôriniz..."></textarea>
                    </div>
                    
                    <div class="booking-summary">
                        <div class="summary-row">
                            <span>Otel:</span>
                            <span id="summaryHotel">-</span>
                        </div>
                        <div class="summary-row">
                            <span>Gec…ô sayƒ±:</span>
                            <span id="summaryNights">0 gec…ô</span>
                        </div>
                        <div class="summary-row">
                            <span>Qonaq:</span>
                            <span id="summaryGuests">2 n…ôf…ôr</span>
                        </div>
                        <div class="summary-row total">
                            <span>C…ômi:</span>
                            <span id="summaryTotal">‚Çº0</span>
                        </div>
                    </div>
                    
                    <button type="submit" class="proceed-btn">√ñd…ôni≈ü…ô Ke√ß ‚Üí</button>
                </form>
            </div>
            
            <!-- Step 2: Payment -->
            <div class="booking-step" id="bookingStep2" style="display: none;">
                <div class="modal-header">
                    <h2>üí≥ √ñd…ôni≈ü</h2>
                    <p>T…ôhl√ºk…ôsiz √∂d…ôni≈ü</p>
                </div>
                
                <div class="payment-methods">
                    <label class="payment-method active">
                        <input type="radio" name="paymentMethod" value="card" checked>
                        <span class="method-icon">üí≥</span>
                        <span>Bank Kartƒ±</span>
                    </label>
                    <label class="payment-method">
                        <input type="radio" name="paymentMethod" value="cash">
                        <span class="method-icon">üíµ</span>
                        <span>Naƒüd</span>
                    </label>
                </div>
                
                <form class="payment-form" id="paymentForm">
                    <div class="card-payment" id="cardPayment">
                        <div class="form-group">
                            <label>Kart N√∂mr…ôsi</label>
                            <input type="text" id="cardNumber" placeholder="0000 0000 0000 0000" maxlength="19">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Son ƒ∞stifad…ô</label>
                                <input type="text" id="cardExpiry" placeholder="AA/ƒ∞ƒ∞" maxlength="5">
                            </div>
                            <div class="form-group">
                                <label>CVV</label>
                                <input type="text" id="cardCvv" placeholder="***" maxlength="3">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Kart Sahibinin Adƒ±</label>
                            <input type="text" id="cardHolder" placeholder="AD SOYAD">
                        </div>
                    </div>
                    
                    <div class="cash-payment" id="cashPayment" style="display: none;">
                        <div class="cash-info">
                            <span class="cash-icon">üíµ</span>
                            <p>Naƒüd √∂d…ôni≈ü oteld…ô qeydiyyat zamanƒ± h…ôyata ke√ßiril…ôc…ôk.</p>
                            <p class="cash-note">Qeyd: Bron t…ôsdiq √º√ß√ºn e-po√ßt g√∂nd…ôril…ôc…ôk.</p>
                        </div>
                    </div>
                    
                    <div class="payment-summary">
                        <div class="summary-row">
                            <span>Otel:</span>
                            <span id="paymentHotel">-</span>
                        </div>
                        <div class="summary-row">
                            <span>Tarix:</span>
                            <span id="paymentDates">-</span>
                        </div>
                        <div class="summary-row total">
                            <span>√ñd…ônil…ôc…ôk m…ôbl…ôƒü:</span>
                            <span id="paymentTotal">‚Çº0</span>
                        </div>
                    </div>
                    
                    <div class="payment-actions">
                        <button type="button" class="back-btn" id="backToBooking">‚Üê Geri</button>
                        <button type="submit" class="pay-btn">√ñd…ôni≈üi Tamamla</button>
                    </div>
                </form>
            </div>
            
            <!-- Step 3: Confirmation -->
            <div class="booking-step" id="bookingStep3" style="display: none;">
                <div class="confirmation-content">
                    <div class="success-icon">‚úì</div>
                    <h2>Sifari≈ü Uƒüurla Tamamlandƒ±!</h2>
                    <p>T…ô≈ü…ôkk√ºr edirik! Sifari≈üiniz q…ôbul edildi.</p>
                    
                    <div class="confirmation-details">
                        <div class="conf-row">
                            <span>Sifari≈ü ‚Ññ:</span>
                            <span id="orderNumber">DT-000000</span>
                        </div>
                        <div class="conf-row">
                            <span>Otel:</span>
                            <span id="confHotel">-</span>
                        </div>
                        <div class="conf-row">
                            <span>Tarix:</span>
                            <span id="confDates">-</span>
                        </div>
                        <div class="conf-row">
                            <span>M…ôbl…ôƒü:</span>
                            <span id="confAmount">‚Çº0</span>
                        </div>
                    </div>
                    
                    <p class="conf-email">T…ôsdiq e-po√ßtu <strong id="confEmail">email@example.com</strong> √ºnvanƒ±na g√∂nd…ôrildi.</p>
                    
                    <button class="close-conf-btn" onclick="closeBookingModal()">Baƒüla</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Transport Modal -->
    <div class="transport-modal" id="transportModal">
        <div class="transport-modal-content">
            <button class="modal-close" onclick="closeTransportModal()">‚úï</button>
            <div class="transport-modal-header">
                <span class="transport-modal-icon" id="transportModalIcon">üöó</span>
                <h2 id="transportModalName">N…ôqliyyat</h2>
            </div>
            <div class="transport-modal-body">
                <p class="transport-modal-desc" id="transportModalDesc"></p>
                
                <div class="transport-modal-details">
                    <div class="transport-detail">
                        <span class="detail-icon">‚è±Ô∏è</span>
                        <div>
                            <span class="detail-label">T…ôxmini M√ºdd…ôt</span>
                            <span class="detail-value" id="transportModalDuration"></span>
                        </div>
                    </div>
                    <div class="transport-detail">
                        <span class="detail-icon">üí∞</span>
                        <div>
                            <span class="detail-label">T…ôxmini Qiym…ôt</span>
                            <span class="detail-value" id="transportModalPrice"></span>
                        </div>
                    </div>
                </div>
                
                <div class="transport-route-section">
                    <h4>üìç Mar≈ürut</h4>
                    <div class="transport-route" id="transportModalRoute"></div>
                </div>
                
                <div class="transport-tips-section">
                    <h4>üí° Faydalƒ± M…ôlumatlar</h4>
                    <ul id="transportModalTips"></ul>
                </div>
                
                <div class="transport-contacts-section" id="transportContactsSection">
                    <h4>üìû ∆èlaq…ô</h4>
                    <div id="transportModalContacts"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tour Booking Modal -->
    <div class="tour-booking-modal" id="tourBookingModal">
        <div class="tour-booking-content">
            <button class="modal-close" onclick="closeTourBookingModal()">‚úï</button>
            
            <div class="booking-step" id="tourStep1">
                <div class="modal-header">
                    <h2>üé´ Tur Sifari≈üi</h2>
                    <p id="tourBookingName">Daƒü Turu</p>
                </div>
                
                <form id="tourOrderForm">
                    <div class="form-group">
                        <label>Tarix</label>
                        <input type="date" id="tourDate" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>ƒ∞≈ütirak√ßƒ± Sayƒ±</label>
                            <select id="tourParticipants" required>
                                <option value="1">1 n…ôf…ôr</option>
                                <option value="2" selected>2 n…ôf…ôr</option>
                                <option value="3">3 n…ôf…ôr</option>
                                <option value="4">4 n…ôf…ôr</option>
                                <option value="5">5 n…ôf…ôr</option>
                                <option value="6">6+ n…ôf…ôr</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tur Tipi</label>
                            <select id="tourType" required>
                                <option value="standard">Standart</option>
                                <option value="vip">VIP</option>
                                <option value="group">Qrup</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Ad Soyad</label>
                        <input type="text" id="tourGuestName" required placeholder="Tam adƒ±nƒ±z">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>E-po√ßt</label>
                            <input type="email" id="tourGuestEmail" required placeholder="email@example.com">
                        </div>
                        <div class="form-group">
                            <label>Telefon</label>
                            <input type="tel" id="tourGuestPhone" required placeholder="+994 XX XXX XX XX">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>X√ºsusi ƒ∞st…ôkl…ôr (opsional)</label>
                        <textarea id="tourRequests" rows="2" placeholder="∆èlav…ô ist…ôkl…ôriniz..."></textarea>
                    </div>
                    
                    <div class="booking-summary">
                        <div class="summary-row">
                            <span>Tur:</span>
                            <span id="summaryTourName">-</span>
                        </div>
                        <div class="summary-row">
                            <span>ƒ∞≈ütirak√ßƒ±:</span>
                            <span id="summaryParticipants">2 n…ôf…ôr</span>
                        </div>
                        <div class="summary-row total">
                            <span>C…ômi:</span>
                            <span id="summaryTourTotal">‚Çº0</span>
                        </div>
                    </div>
                    
                    <button type="submit" class="proceed-btn">Sifari≈üi T…ôsdiql…ô</button>
                </form>
            </div>
            
            <div class="booking-step" id="tourStep2" style="display: none;">
                <div class="confirmation-content">
                    <div class="success-icon">‚úì</div>
                    <h2>Sifari≈ü Q…ôbul Edildi!</h2>
                    <p>T…ô≈ü…ôkk√ºr edirik! Sifari≈üiniz q…ôbul edildi.</p>
                    
                    <div class="confirmation-details">
                        <div class="conf-row">
                            <span>Sifari≈ü ‚Ññ:</span>
                            <span id="tourOrderNumber">DT-000000</span>
                        </div>
                        <div class="conf-row">
                            <span>Tur:</span>
                            <span id="confTourName">-</span>
                        </div>
                        <div class="conf-row">
                            <span>Tarix:</span>
                            <span id="confTourDate">-</span>
                        </div>
                        <div class="conf-row">
                            <span>ƒ∞≈ütirak√ßƒ±:</span>
                            <span id="confTourParticipants">-</span>
                        </div>
                        <div class="conf-row">
                            <span>M…ôbl…ôƒü:</span>
                            <span id="confTourAmount">‚Çº0</span>
                        </div>
                    </div>
                    
                    <p class="conf-email">T…ôsdiq e-po√ßtu <strong id="confTourEmail">email@example.com</strong> √ºnvanƒ±na g√∂nd…ôrildi.</p>
                    <p class="conf-note">∆èm…ôkda≈ülarƒ±mƒ±z tezlikl…ô sizinl…ô …ôlaq…ô saxlayacaq.</p>
                    
                    <button class="close-conf-btn" onclick="closeTourBookingModal()">Baƒüla</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Activity Modal -->
    <div class="activity-modal" id="activityModal">
        <div class="activity-modal-content">
            <button class="modal-close" onclick="closeActivityModal()">‚úï</button>
            <div class="activity-modal-header">
                <span class="activity-modal-icon" id="activityModalIcon">üèîÔ∏è</span>
                <h2 id="activityModalName">F…ôaliyy…ôt</h2>
            </div>
            <div class="activity-modal-body">
                <p class="activity-modal-desc" id="activityModalDesc"></p>
                <div class="activity-modal-details">
                    <div class="activity-detail">
                        <span class="detail-icon">‚è±Ô∏è</span>
                        <div>
                            <span class="detail-label">M√ºdd…ôt</span>
                            <span class="detail-value" id="activityModalDuration"></span>
                        </div>
                    </div>
                    <div class="activity-detail">
                        <span class="detail-icon">üìä</span>
                        <div>
                            <span class="detail-label">√á…ôtinlik</span>
                            <span class="detail-value" id="activityModalDifficulty"></span>
                        </div>
                    </div>
                    <div class="activity-detail">
                        <span class="detail-icon">üí∞</span>
                        <div>
                            <span class="detail-label">Qiym…ôt</span>
                            <span class="detail-value" id="activityModalPrice"></span>
                        </div>
                    </div>
                    <div class="activity-detail">
                        <span class="detail-icon">üë•</span>
                        <div>
                            <span class="detail-label">Qrup</span>
                            <span class="detail-value" id="activityModalGroup"></span>
                        </div>
                    </div>
                </div>
                <div class="activity-modal-requirements">
                    <h4>T…ôl…ôbl…ôr</h4>
                    <ul id="activityModalRequirements"></ul>
                </div>
                <div class="activity-modal-equipment">
                    <h4>Lazƒ±mi Avadanlƒ±q</h4>
                    <div id="activityModalEquipment"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <span class="logo-icon">‚õ∞Ô∏è</span>
                <span class="logo-text">PeakExplorer</span>
                <p>Az…ôrbaycanƒ±n daƒü zirv…ôl…ôrini biziml…ô k…ô≈üf edin.</p>
            </div>
            
            <div class="footer-links">
                <h4>Ke√ßidl…ôr</h4>
                <a href="index (2).html#home">Ana S…ôhif…ô</a>
                <a href="index (2).html#map">X…ôrit…ô</a>
                <a href="index (2).html#mountains">Daƒülar</a>
                <a href="index (2).html#contact">∆èlaq…ô</a>
            </div>
            
            <div class="footer-social">
                <h4>Sosial ≈û…ôb…ôk…ôl…ôr</h4>
                <div class="social-links">
                    <a href="#" class="social-link">üìò</a>
                    <a href="#" class="social-link">üì∏</a>
                    <a href="#" class="social-link">üê¶</a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>¬© 2025 PeakExplorer. B√ºt√ºn h√ºquqlar qorunur.</p>
        </div>
    </footer>

    <script>
        // ==========================================
        // WEATHER API FUNCTIONS
        // ==========================================
        const WEATHER_API_KEY = ''; // Free API key from Open-Meteo (no key needed)
        
        // Weather condition mapping
        const weatherConditions = {
            0: { icon: '‚òÄÔ∏è', desc: 'A√ßƒ±q hava' },
            1: { icon: 'üå§Ô∏è', desc: '∆èsas…ôn a√ßƒ±q' },
            2: { icon: '‚õÖ', desc: 'Qism…ôn buludlu' },
            3: { icon: '‚òÅÔ∏è', desc: 'Buludlu' },
            45: { icon: 'üå´Ô∏è', desc: 'Dumanlƒ±' },
            48: { icon: 'üå´Ô∏è', desc: 'Qƒ±raƒüƒ±' },
            51: { icon: 'üåßÔ∏è', desc: 'Y√ºng√ºl yaƒüƒ±≈ü' },
            53: { icon: 'üåßÔ∏è', desc: 'Orta yaƒüƒ±≈ü' },
            55: { icon: 'üåßÔ∏è', desc: 'G√ºcl√º yaƒüƒ±≈ü' },
            61: { icon: 'üåßÔ∏è', desc: 'Y√ºng√ºl yaƒüƒ±≈ü' },
            63: { icon: 'üåßÔ∏è', desc: 'Orta yaƒüƒ±≈ü' },
            65: { icon: 'üåßÔ∏è', desc: 'G√ºcl√º yaƒüƒ±≈ü' },
            71: { icon: 'üå®Ô∏è', desc: 'Y√ºng√ºl qar' },
            73: { icon: 'üå®Ô∏è', desc: 'Orta qar' },
            75: { icon: '‚ùÑÔ∏è', desc: 'G√ºcl√º qar' },
            77: { icon: 'üå®Ô∏è', desc: 'Qar d…ôn…ôl…ôri' },
            80: { icon: 'üåßÔ∏è', desc: 'Yaƒüƒ±≈ü' },
            81: { icon: 'üåßÔ∏è', desc: 'Orta yaƒüƒ±≈ü' },
            82: { icon: '‚õàÔ∏è', desc: 'G√ºcl√º yaƒüƒ±≈ü' },
            85: { icon: 'üå®Ô∏è', desc: 'Y√ºng√ºl qar' },
            86: { icon: '‚ùÑÔ∏è', desc: 'G√ºcl√º qar' },
            95: { icon: '‚õàÔ∏è', desc: 'Tufan' },
            96: { icon: '‚õàÔ∏è', desc: 'Tufan (dolu il…ô)' },
            99: { icon: '‚õàÔ∏è', desc: 'G√ºcl√º tufan' }
        };
        
        const dayNames = ['Bazar', 'Bazar ert…ôsi', '√á…ôr≈ü…ônb…ô ax≈üamƒ±', '√á…ôr≈ü…ônb…ô', 'C√ºm…ô ax≈üamƒ±', 'C√ºm…ô', '≈û…ônb…ô'];
        
        async function loadWeatherData(lat, lon) {
            const weatherWidget = document.getElementById('weatherWidget');
            const weatherIcon = document.getElementById('weatherIcon');
            const weatherTemp = document.getElementById('weatherTemp');
            const weatherDesc = document.getElementById('weatherDesc');
            const weatherForecast = document.getElementById('weatherForecast');
            
            try {
                // Open-Meteo API (pulsuz, API key lazƒ±m deyil)
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=auto&forecast_days=14`
                );
                
                if (!response.ok) throw new Error('Weather API error');
                
                const data = await response.json();
                
                // Current weather
                const currentTemp = Math.round(data.current.temperature_2m);
                const currentCode = data.current.weather_code;
                const currentCondition = weatherConditions[currentCode] || { icon: 'üå°Ô∏è', desc: 'M…ôlumat yoxdur' };
                
                weatherIcon.textContent = currentCondition.icon;
                weatherTemp.textContent = `${currentTemp}¬∞C`;
                weatherDesc.textContent = currentCondition.desc;
                
                // 14 g√ºnl√ºk proqnoz
                let forecastHTML = '<div class="forecast-title">üìÖ 2 H…ôft…ôlik Hava Proqnozu</div><div class="forecast-days">';
                
                data.daily.time.forEach((date, index) => {
                    const dayDate = new Date(date);
                    const dayName = index === 0 ? 'Bu g√ºn' : (index === 1 ? 'Sabah' : dayNames[dayDate.getDay()]);
                    const dayCode = data.daily.weather_code[index];
                    const dayCondition = weatherConditions[dayCode] || { icon: 'üå°Ô∏è', desc: '' };
                    const maxTemp = Math.round(data.daily.temperature_2m_max[index]);
                    const minTemp = Math.round(data.daily.temperature_2m_min[index]);
                    
                    forecastHTML += `
                        <div class="forecast-day">
                            <span class="forecast-day-name">${dayName}</span>
                            <span class="forecast-day-icon">${dayCondition.icon}</span>
                            <div class="forecast-day-temps">
                                <span class="forecast-day-high">${maxTemp}¬∞</span>
                                <span class="forecast-day-low">${minTemp}¬∞</span>
                            </div>
                            <span class="forecast-day-desc">${dayCondition.desc}</span>
                        </div>
                    `;
                });
                
                forecastHTML += '</div>';
                weatherForecast.innerHTML = forecastHTML;
                
            } catch (error) {
                console.error('Weather loading error:', error);
                weatherIcon.textContent = 'üå°Ô∏è';
                weatherTemp.textContent = '--¬∞C';
                weatherDesc.textContent = 'Y√ºkl…ôn…ô bilm…ôdi';
                weatherForecast.innerHTML = '<div class="forecast-title">Hava m…ôlumatƒ± …ôld…ô edil…ô bilm…ôdi</div>';
            }
        }

        // Notification funksiyasƒ±
        function showNotification(message, type = 'info') {
            // ∆èvv…ôlki bildiri≈üi sil
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <span class="notification-message">${message}</span>
                <button class="notification-close" onclick="this.parentElement.remove()">‚úï</button>
            `;
            
            document.body.appendChild(notification);
            
            // Animasiya √º√ß√ºn timeout
            setTimeout(() => notification.classList.add('show'), 10);
            
            // 5 saniy…ôd…ôn sonra avtomatik baƒüla
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }

        // Daƒü m…ôlumatlarƒ± (…ôsas s…ôhif…ô il…ô eyni)
        const mountainsData = {
            'bazarduzu': {
                id: 'bazarduzu',
                name: 'Bazard√ºz√º',
                coords: [41.2206, 47.8642],
                altitude: '4466 m',
                difficulty: 'M√ºr…ôkk…ôb',
                difficultyClass: 'hard',
                location: 'Qusar rayonu',
                bestTime: 'ƒ∞yul - Sentyabr',
                groupSize: '5-10 n…ôf…ôr',
                price: '‚Çº1200',
                description: 'Bazard√ºz√º ‚Äî Az…ôrbaycanƒ±n …ôn h√ºnd√ºr zirv…ôsi olub, B√∂y√ºk Qafqaz silsil…ôsind…ô, Rusiya il…ô s…ôrh…ôdd…ô yerl…ô≈üir. Zirv…ônin h√ºnd√ºrl√ºy√º 4466 metrdir. Bu daƒü alpinistl…ôr √º√ß√ºn …ôn √ß…ôtin v…ô maraqlƒ± mar≈ürutlardan biridir. Zirv…ôy…ô qalxƒ±≈ü ad…ôt…ôn 2-3 g√ºn √ß…ôkir v…ô professional avadanlƒ±q t…ôl…ôb edir. Daƒüƒ±n …ôtrafƒ±nda nadir flora v…ô fauna n√∂vl…ôri m√∂vcuddur.',
                heroImage: 'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=2070',
                hotels: [
                    { name: '≈ûahdaƒü Resort', rating: 5, price: '‚Çº250/gec…ô', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400', features: ['Spa', 'Restoran', 'Transfer'] },
                    { name: 'Qusar Park Hotel', rating: 4, price: '‚Çº120/gec…ô', image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400', features: ['WiFi', 'Parking', 'S…ôh…ôr yem…ôyi'] },
                    { name: 'L…ôz…ô Guest House', rating: 3, price: '‚Çº50/gec…ô', image: 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=400', features: ['Ev yem…ôyi', 'B…ôl…ôd√ßi'] }
                ],
                restaurants: [
                    { name: 'Qusar Milli M…ôtb…ôx', cuisine: 'Az…ôrbaycan', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400' },
                    { name: 'Daƒü Restoranƒ±', cuisine: 'Yerli', price: '‚Çº', image: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400' }
                ],
                activities: [
                    { name: 'Alpinizm', icon: 'üßó', description: 'Professional alpinizm turu' },
                    { name: 'Trekking', icon: 'ü•æ', description: 'Daƒü y√ºr√º≈ül…ôri' },
                    { name: 'Foto-tur', icon: 'üì∏', description: 'M…ônz…ôr…ô fotoqrafiyasƒ±' },
                    { name: 'D√º≈ü…ôrg…ô', icon: '‚õ∫', description: '√áadƒ±r d√º≈ü…ôrg…ôsi' }
                ],
                transport: ['Jeep transfer (Qusar)', 'Daƒü b…ôl…ôd√ßisi il…ô', 'At il…ô y√ºk da≈üƒ±ma'],
                routes: [
                    { type: 'Avtomobil', duration: '4-5 saat', path: 'Bakƒ± ‚Üí Qusar ‚Üí L…ôz…ô k…ôndi', icon: 'üöó' },
                    { type: 'Piyada', duration: '2-3 g√ºn', path: 'L…ôz…ô d√º≈ü…ôrg…ôsi ‚Üí Bazard√ºz√º zirv…ôsi', icon: 'ü•æ' }
                ]
            },
            'shahdag': {
                id: 'shahdag',
                name: '≈ûahdaƒü',
                coords: [41.3222, 48.1347],
                altitude: '4243 m',
                difficulty: 'Orta',
                difficultyClass: 'medium',
                location: 'Qusar rayonu',
                bestTime: 'B√ºt√ºn il',
                groupSize: '2-20 n…ôf…ôr',
                price: '‚Çº450',
                description: '≈ûahdaƒü ‚Äî Az…ôrbaycanƒ±n …ôn m…ô≈ühur qƒ±≈ü turizm m…ôrk…ôzidir. M√ºasir xiz…ôk infrastrukturu, kanat yollarƒ± v…ô l√ºks otell…ôr il…ô turistl…ôri c…ôlb edir. Qƒ±≈ü m√∂vs√ºm√ºnd…ô xiz…ôk v…ô snowboard, yay m√∂vs√ºm√ºnd…ô is…ô trekking v…ô paraqlaydinq imkanlarƒ± var. Kurort zonasƒ± 1500-2500 metr y√ºks…ôklikd…ô yerl…ô≈üir.',
                heroImage: 'https://images.unsplash.com/photo-1491002052546-bf38f186af56?q=80&w=2083',
                hotels: [
                    { name: '≈ûahdaƒü Hotel', rating: 5, price: '‚Çº350/gec…ô', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400', features: ['Xiz…ôk lift', 'Spa', 'Restoran'] },
                    { name: 'Pik Palace', rating: 5, price: '‚Çº400/gec…ô', image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400', features: ['L√ºks', 'Hovuz', 'Fitness'] },
                    { name: 'Zirve Hotel', rating: 4, price: '‚Çº180/gec…ô', image: 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=400', features: ['WiFi', 'Parking', 'Restoran'] },
                    { name: 'Park Chalet', rating: 4, price: '‚Çº220/gec…ô', image: 'https://images.unsplash.com/photo-1445019980597-93fa8acb246c?w=400', features: ['≈û√∂mine', 'M…ônz…ôr…ô', 'Sauna'] }
                ],
                restaurants: [
                    { name: 'Altitude Restaurant', cuisine: 'Beyn…ôlxalq', price: '‚Çº‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400', phone: '+994 12 345 67 89', address: '≈ûahdaƒü Kurort, Qusar', hours: '08:00 - 23:00', rating: 4.8, description: 'Daƒü zirv…ôsind…ô yerl…ô≈ü…ôn l√ºks restoran. Panoramik m…ônz…ôr…ô, beyn…ôlxalq m…ôtb…ôx v…ô pe≈ü…ôkar xidm…ôt.', features: ['Panoramik m…ônz…ôr…ô', 'Canlƒ± musiqi', 'VIP otaqlar', 'WiFi'] },
                    { name: '≈ûahdaƒü Lounge', cuisine: 'Fusion', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400', phone: '+994 12 456 78 90', address: 'Pik Palace Hotel, ≈ûahdaƒü', hours: '10:00 - 24:00', rating: 4.5, description: 'Modern dizayn v…ô rahat atmosfer. Fusion m…ôtb…ôxi v…ô geni≈ü kokteyl se√ßimi.', features: ['Bar', 'Kokteyll…ôr', 'Lounge zona', '≈û√∂mine'] },
                    { name: 'Daƒü Evi', cuisine: 'Az…ôrbaycan', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400', phone: '+994 12 567 89 01', address: 'Qusar ≈ü…ôh…ôri, M…ôrk…ôz', hours: '09:00 - 22:00', rating: 4.7, description: '∆èn…ôn…ôvi Az…ôrbaycan m…ôtb…ôxi. T…ôz…ô yerli m…ôhsullar v…ô ail…ô reseptl…ôri.', features: ['Milli yem…ôkl…ôr', 'Ail…ô dostu', 'Veranda', 'Parking'] }
                ],
                activities: [
                    { name: 'Xiz…ôk', icon: '‚õ∑Ô∏è', description: 'Qƒ±≈ü xiz…ôyi' },
                    { name: 'Snowboard', icon: 'üèÇ', description: 'Snowboard s√ºr√º≈ü√º' },
                    { name: 'Paraqlaydinq', icon: 'ü™Ç', description: 'Hava idmanƒ±' },
                    { name: 'Trekking', icon: 'ü•æ', description: 'Yay y√ºr√º≈ül…ôri' },
                    { name: 'ATV Turu', icon: 'üèçÔ∏è', description: 'Daƒü ATV g…ôzintisi' }
                ],
                transport: ['Avtobus (Bakƒ±-Qusar)', 'Taksi', '≈û…ôxsi avtomobil', 'Transfer xidm…ôti'],
                routes: [
                    { type: 'Avtomobil', duration: '3 saat', path: 'Bakƒ± ‚Üí Qusar ‚Üí ≈ûahdaƒü Kurort', icon: 'üöó' },
                    { type: 'Kanat yolu', duration: '15 d…ôq', path: 'Kurort ‚Üí Zirv…ô stansiyasƒ±', icon: 'üö°' }
                ]
            },
            'tufandag': {
                id: 'tufandag',
                name: 'Tufandaƒü',
                coords: [40.9833, 47.8667],
                altitude: '4191 m',
                difficulty: 'Asan',
                difficultyClass: 'easy',
                location: 'Q…ôb…ôl…ô rayonu',
                bestTime: 'B√ºt√ºn il',
                groupSize: '1-30 n…ôf…ôr',
                price: '‚Çº200',
                description: 'Tufandaƒü ‚Äî Q…ôb…ôl…ô rayonunda yerl…ô≈ü…ôn m√ºasir turizm m…ôrk…ôzidir. Az…ôrbaycanƒ±n …ôn uzun kanat yolu burada yerl…ô≈üir. Yay v…ô qƒ±≈ü m√∂vs√ºm√ºnd…ô f…ôaliyy…ôt g√∂st…ôrir. ∆ètrafda g√∂z…ôl me≈ü…ôl…ôr, ≈ü…ôlal…ôl…ôr v…ô tarixi abid…ôl…ôr var.',
                heroImage: 'https://images.unsplash.com/photo-1454496522488-7a8e488e8606?q=80&w=2076',
                hotels: [
                    { name: 'Qafqaz Resort', rating: 5, price: '‚Çº280/gec…ô', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400', features: ['Hovuz', 'Spa', 'Restoran'] },
                    { name: 'Qafqaz Riverside', rating: 5, price: '‚Çº320/gec…ô', image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400', features: ['√áay k…ônarƒ±', 'Balƒ±q√ßƒ±lƒ±q'] },
                    { name: 'Chenot Palace', rating: 5, price: '‚Çº500/gec…ô', image: 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=400', features: ['Detox', 'Wellness'] },
                    { name: 'Marxal Resort', rating: 4, price: '‚Çº150/gec…ô', image: 'https://images.unsplash.com/photo-1445019980597-93fa8acb246c?w=400', features: ['Ail…ô dostu', 'Oyun meydan√ßasƒ±'] }
                ],
                restaurants: [
                    { name: 'Qazmaq Restaurant', cuisine: 'Az…ôrbaycan', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400', phone: '+994 24 205 55 55', address: 'Qafqaz Resort, Q…ôb…ôl…ô', hours: '07:00 - 23:00', rating: 4.6, description: '∆èn…ôn…ôvi Az…ôrbaycan m…ôtb…ôxinin …ôn yax≈üƒ± n√ºmun…ôl…ôri. T…ôndird…ô bi≈ümi≈ü yem…ôkl…ôr.', features: ['A√ßƒ±q veranda', 'Canlƒ± musiqi', 'U≈üaq menyusu', 'Parking'] },
                    { name: 'Riverside Cafe', cuisine: 'Avropa', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400', phone: '+994 24 206 66 66', address: 'Qafqaz Riverside, Q…ôb…ôl…ô', hours: '08:00 - 22:00', rating: 4.4, description: '√áay k…ônarƒ±nda romantik atmosfer. ƒ∞talyan v…ô Fransƒ±z m…ôtb…ôxi.', features: ['√áay m…ônz…ôr…ôsi', 'Romantik', 'WiFi', 'Terras'] },
                    { name: 'D…ôd…ô Qorqud', cuisine: 'Milli', price: '‚Çº', image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400', phone: '+994 24 207 77 77', address: 'Q…ôb…ôl…ô ≈ü…ôh…ôri, M…ôrk…ôz', hours: '10:00 - 21:00', rating: 4.8, description: 'Q…ôdim reseptl…ôrl…ô hazƒ±rlanan milli yem…ôkl…ôr. Qutab, dolma, piti.', features: ['Milli m…ôtb…ôx', 'Uyƒüun qiym…ôt', 'Ail…ô dostu', 'Take-away'] }
                ],
                activities: [
                    { name: 'Kanat yolu', icon: 'üö°', description: 'Panoramik kanat yolu' },
                    { name: 'Xiz…ôk', icon: '‚õ∑Ô∏è', description: 'Qƒ±≈ü xiz…ôyi' },
                    { name: 'Zipline', icon: 'üéø', description: 'Ekstrem zipline' },
                    { name: 'At g…ôzintisi', icon: 'üê¥', description: 'Daƒü g…ôzintisi' },
                    { name: 'Paraqlaydinq', icon: 'ü™Ç', description: 'Tandem u√ßu≈ü' }
                ],
                transport: ['Avtobus (Bakƒ±-Q…ôb…ôl…ô)', 'Taksi', '≈û…ôxsi avtomobil'],
                routes: [
                    { type: 'Avtomobil', duration: '2.5 saat', path: 'Bakƒ± ‚Üí ≈û…ômkir ‚Üí Q…ôb…ôl…ô ‚Üí Tufandaƒü', icon: 'üöó' },
                    { type: 'Kanat yolu', duration: '20 d…ôq', path: 'A≈üaƒüƒ± stansiya ‚Üí Yuxarƒ± stansiya', icon: 'üö°' }
                ]
            },
            'babadag': {
                id: 'babadag',
                name: 'Babadaƒü',
                coords: [41.1667, 48.6167],
                altitude: '3629 m',
                difficulty: 'Orta',
                difficultyClass: 'medium',
                location: 'Quba rayonu',
                bestTime: 'May - Oktyabr',
                groupSize: '5-20 n…ôf…ôr',
                price: '‚Çº300',
                description: 'Babadaƒü ‚Äî Az…ôrbaycanda m√ºq…ôdd…ôs sayƒ±lan daƒülardan biridir. H…ôr il minl…ôrl…ô z…ôvvar buraya ziyar…ôt…ô g…ôlir. Daƒüƒ±n zirv…ôsind…ô q…ôdim ibad…ôtgah yerl…ô≈üir. T…ôbi…ôt m…ônz…ôr…ôl…ôri v…ô m…ôn…ôvi atmosfer turistl…ôri c…ôlb edir.',
                heroImage: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070',
                hotels: [
                    { name: 'Quba Palace Hotel', rating: 5, price: '‚Çº200/gec…ô', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400', features: ['Spa', 'Restoran', 'Hovuz'] },
                    { name: 'Rixos Quba', rating: 5, price: '‚Çº350/gec…ô', image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400', features: ['All-inclusive', 'Aquapark'] },
                    { name: 'Quba Olympic Complex', rating: 4, price: '‚Çº100/gec…ô', image: 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=400', features: ['ƒ∞dman zalƒ±', 'Hovuz'] }
                ],
                restaurants: [
                    { name: 'Quba Milli M…ôtb…ôx', cuisine: 'Az…ôrbaycan', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400', phone: '+994 23 335 55 55', address: 'Quba ≈ü…ôh…ôri, Heyd…ôr ∆èliyev pr.', hours: '09:00 - 22:00', rating: 4.7, description: 'Quba b√∂lg…ôsinin …ôn m…ô≈ühur restoranƒ±. Xƒ±nqal, quymaq v…ô dig…ôr yerli yem…ôkl…ôr.', features: ['Milli m…ôtb…ôx', 'Geni≈ü salon', 'Toy m…ôrasiml…ôri', 'Parking'] },
                    { name: 'Apple Garden', cuisine: 'Yerli', price: '‚Çº', image: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400' },
                    { name: 'Sahil Restaurant', cuisine: 'Balƒ±q', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400' }
                ],
                activities: [
                    { name: 'Ziyar…ôt', icon: 'üôè', description: 'M√ºq…ôdd…ôs yerin ziyar…ôti' },
                    { name: 'Trekking', icon: 'ü•æ', description: 'Daƒü y√ºr√º≈ü√º' },
                    { name: 'Meditasiya', icon: 'üßò', description: 'M…ôn…ôvi t…ôcr√ºb…ô' },
                    { name: 'Foto-tur', icon: 'üì∏', description: 'T…ôbi…ôt fotoqrafiyasƒ±' }
                ],
                transport: ['Taksi (Quba)', '≈û…ôxsi avtomobil', 'Piyada'],
                routes: [
                    { type: 'Avtomobil', duration: '3 saat', path: 'Bakƒ± ‚Üí Quba ‚Üí Babadaƒü …ôt…ôyi', icon: 'üöó' },
                    { type: 'Piyada', duration: '4-5 saat', path: 'Babadaƒü …ôt…ôyi ‚Üí Zirv…ô', icon: 'ü•æ' }
                ]
            },
            'khinaliq': {
                id: 'khinaliq',
                name: 'Xƒ±nalƒ±q',
                coords: [41.1833, 48.1167],
                altitude: '2350 m',
                difficulty: 'Orta',
                difficultyClass: 'medium',
                location: 'Quba rayonu',
                bestTime: 'May - Sentyabr',
                groupSize: '5-15 n…ôf…ôr',
                price: '‚Çº350',
                description: 'Xƒ±nalƒ±q ‚Äî d√ºnyanƒ±n …ôn q…ôdim ya≈üayƒ±≈ü yerl…ôrind…ôn biridir. 5000 illik tarix…ô malikdir. Burada ya≈üayan xƒ±nalƒ±qlƒ±lar √∂z unikal dill…ôrini v…ô m…ôd…ôniyy…ôtl…ôrini qoruyub saxlayƒ±blar. K…ônd UNESCO-nun qeyri-maddi m…ôd…ôni irs siyahƒ±sƒ±na daxildir.',
                heroImage: 'https://images.unsplash.com/photo-1464278533981-50106e6176b1?q=80&w=2074',
                hotels: [
                    { name: 'Xƒ±nalƒ±q Guest House', rating: 3, price: '‚Çº40/gec…ô', image: 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=400', features: ['Ev yem…ôyi', 'B…ôl…ôd√ßi'] },
                    { name: 'Yerli evl…ôr', rating: 3, price: '‚Çº30/gec…ô', image: 'https://images.unsplash.com/photo-1445019980597-93fa8acb246c?w=400', features: ['Autentik', 'Ail…ô yanƒ±nda'] },
                    { name: 'Quba Palace Hotel', rating: 5, price: '‚Çº200/gec…ô', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400', features: ['Qubada', 'L√ºks'] }
                ],
                restaurants: [
                    { name: 'Yerli ev yem…ôkl…ôri', cuisine: 'Xƒ±nalƒ±q', price: '‚Çº', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400' },
                    { name: 'Xƒ±nalƒ±q √ßayxanasƒ±', cuisine: '√áay', price: '‚Çº', image: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400' }
                ],
                activities: [
                    { name: 'M…ôd…ôni tur', icon: 'üèõÔ∏è', description: 'K…ônd turu' },
                    { name: 'Etnoqrafiya', icon: 'üé≠', description: 'M…ôd…ôniyy…ôt √∂yr…ônm…ô' },
                    { name: 'Trekking', icon: 'ü•æ', description: 'Daƒü y√ºr√º≈ü√º' },
                    { name: 'Foto-tur', icon: 'üì∏', description: 'S…ôn…ôdli foto' },
                    { name: 'S…ôn…ôtkarlƒ±q', icon: 'üß∂', description: 'Yerli s…ôn…ôt' }
                ],
                transport: ['Jeep (Quba)', '4x4 avtomobil'],
                routes: [
                    { type: 'Avtomobil', duration: '4 saat', path: 'Bakƒ± ‚Üí Quba ‚Üí Xƒ±nalƒ±q', icon: 'üöó' },
                    { type: 'Piyada', duration: '1 g√ºn', path: 'Qrƒ±z k…ôndi ‚Üí Xƒ±nalƒ±q', icon: 'ü•æ' }
                ]
            },
            'qobustan': {
                id: 'qobustan',
                name: 'B√∂y√ºkda≈ü',
                coords: [40.0906, 49.3717],
                altitude: '400 m',
                difficulty: 'Asan',
                difficultyClass: 'easy',
                location: 'Qobustan rayonu',
                bestTime: 'B√ºt√ºn il',
                groupSize: '1-50 n…ôf…ôr',
                price: '‚Çº50',
                description: 'Qobustan Milli Parkƒ± ‚Äî q…ôdim qaya√ºst√º r…ôsml…ôr v…ô pal√ßƒ±q vulkanlarƒ± il…ô m…ô≈ühur …ôrazidir. UNESCO D√ºnya ƒ∞rsi siyahƒ±sƒ±na daxildir. Burada 6000 ild…ôn √ßox ya≈üƒ± olan petroqlifl…ôr, q…ôdim insan m…ôsk…ônl…ôri v…ô unikal geoloji formasiyalar m√∂vcuddur.',
                heroImage: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=2074',
                hotels: [
                    { name: 'Bakƒ± otell…ôri', rating: 4, price: '‚Çº100/gec…ô', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400', features: ['≈û…ôh…ôr m…ôrk…ôzi'] },
                    { name: 'Qobustan yaxƒ±nlƒ±ƒüƒ±', rating: 3, price: '‚Çº60/gec…ô', image: 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=400', features: ['Yerli'] }
                ],
                restaurants: [
                    { name: 'Qobustan Cafe', cuisine: 'Az…ôrbaycan', price: '‚Çº', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400', phone: '+994 12 444 55 66', address: 'Qobustan Milli Parkƒ± yaxƒ±nlƒ±ƒüƒ±', hours: '08:00 - 20:00', rating: 4.2, description: 'Park yaxƒ±nlƒ±ƒüƒ±nda ki√ßik ail…ô restoranƒ±. Sad…ô v…ô l…ôzz…ôtli yem…ôkl…ôr.', features: ['Yerli m…ôtb…ôx', 'Uyƒüun qiym…ôt', 'Parking'] },
                    { name: 'Bakƒ± restoranlarƒ±', cuisine: 'M√ºxt…ôlif', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400', phone: '+994 12 555 66 77', address: 'Bakƒ± ≈ü…ôh…ôri', hours: '10:00 - 24:00', rating: 4.5, description: 'Bakƒ±nƒ±n m…ô≈ühur restoranlarƒ±. Geni≈ü se√ßim.', features: ['M√ºxt…ôlif m…ôtb…ôx', '≈û…ôh…ôr m…ôrk…ôzi', 'WiFi'] }
                ],
                activities: [
                    { name: 'Muzey ziyar…ôti', icon: 'üèõÔ∏è', description: 'ƒ∞nteraktiv muzey' },
                    { name: 'Petroqlifl…ôr', icon: 'ü™®', description: 'Qaya√ºst√º r…ôsml…ôr' },
                    { name: 'Vulkanlar', icon: 'üåã', description: 'Pal√ßƒ±q vulkanlarƒ±' },
                    { name: 'Foto-tur', icon: 'üì∏', description: 'Land≈üaft foto' }
                ],
                transport: ['Avtobus', 'Taksi', '≈û…ôxsi avtomobil', 'Tur avtobusu'],
                routes: [
                    { type: 'Avtomobil', duration: '1 saat', path: 'Bakƒ± ‚Üí Qobustan', icon: 'üöó' }
                ]
            }
        };

        // S…ôhif…ô y√ºkl…ôn…ônd…ô
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const mountainId = urlParams.get('id') || 'shahdag';
            
            const mountain = mountainsData[mountainId];
            
            if (mountain) {
                loadMountainDetails(mountain);
            } else {
                // ∆èg…ôr daƒü tapƒ±lmadƒ±sa, default m…ôlumat g√∂st…ôr
                loadDefaultMountain(mountainId);
            }
        });

        function loadDefaultMountain(mountainId) {
            // Default daƒü m…ôlumatƒ±
            const defaultMountain = {
                id: mountainId,
                name: mountainId.charAt(0).toUpperCase() + mountainId.slice(1),
                altitude: 'N/A',
                difficulty: 'N/A',
                difficultyClass: 'medium',
                location: 'D√ºnya',
                bestTime: 'M√∂vs√ºm…ô g√∂r…ô',
                groupSize: 'D…ôyi≈ük…ôn',
                price: 'Sorƒüu il…ô',
                description: 'Bu daƒü haqqƒ±nda …ôtraflƒ± m…ôlumat √º√ß√ºn biziml…ô …ôlaq…ô saxlayƒ±n.',
                heroImage: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=2070',
                hotels: [
                    { name: 'Yaxƒ±n otell…ôr', rating: 4, price: 'Sorƒüu il…ô', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400', features: ['M√ºxt…ôlif'] }
                ],
                restaurants: [
                    { name: 'Yerli restoranlar', cuisine: 'M√ºxt…ôlif', price: '‚Çº‚Çº', image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400' }
                ],
                activities: [
                    { name: 'Trekking', icon: 'ü•æ', description: 'Daƒü y√ºr√º≈ü√º' },
                    { name: 'Foto-tur', icon: 'üì∏', description: 'M…ônz…ôr…ô fotoqrafiyasƒ±' }
                ],
                transport: ['Yerli n…ôqliyyat'],
                routes: [
                    { type: 'M√ºxt…ôlif', duration: 'D…ôyi≈ük…ôn', path: 'Yerli mar≈ürutlar', icon: 'üöó' }
                ]
            };
            loadMountainDetails(defaultMountain);
        }

        function loadMountainDetails(mountain) {
            // Hero section
            document.getElementById('mountainHero').style.backgroundImage = `url('${mountain.heroImage}')`;
            document.getElementById('heroMountainName').textContent = mountain.name;
            document.getElementById('heroAltitude').innerHTML = `<span class="meta-icon">üìè</span> ${mountain.altitude}`;
            document.getElementById('heroDifficulty').innerHTML = `<span class="meta-icon">‚ö°</span> ${mountain.difficulty}`;
            document.getElementById('heroDifficulty').className = `hero-difficulty ${mountain.difficultyClass}`;
            
            // Load weather data
            if (mountain.coords) {
                loadWeatherData(mountain.coords[0], mountain.coords[1]);
            }
            
            // Description
            document.getElementById('mountainFullDescription').textContent = mountain.description;
            document.getElementById('qiAltitude').textContent = mountain.altitude;
            document.getElementById('qiLocation').textContent = mountain.location;
            document.getElementById('qiBestTime').textContent = mountain.bestTime;
            document.getElementById('qiGroupSize').textContent = mountain.groupSize;
            document.getElementById('tourPrice').textContent = mountain.price;
            
            // Page title
            document.title = `${mountain.name} | PeakExplorer`;

            // Hotels
            const hotelsGrid = document.getElementById('hotelsGrid');
            hotelsGrid.innerHTML = mountain.hotels.map((hotel, index) => `
                <div class="detail-card hotel-card">
                    <div class="card-image" style="background-image: url('${hotel.image}')"></div>
                    <div class="card-body">
                        <h3>${hotel.name}</h3>
                        <div class="card-rating">${'‚≠ê'.repeat(hotel.rating)}</div>
                        <p class="card-price">${hotel.price}</p>
                        <div class="card-features">
                            ${hotel.features.map(f => `<span class="feature-tag">${f}</span>`).join('')}
                        </div>
                        <button class="book-hotel-btn" onclick="openBookingModal('${hotel.name}', '${hotel.price}', ${hotel.rating})">
                            Sifari≈ü Et
                        </button>
                    </div>
                </div>
            `).join('');

            // Restaurants - Store for modal access
            window.currentRestaurants = mountain.restaurants;
            
            const restaurantsGrid = document.getElementById('restaurantsGrid');
            restaurantsGrid.innerHTML = mountain.restaurants.map((rest, index) => `
                <div class="detail-card restaurant-card clickable" onclick="openRestaurantModal(${index})">
                    <div class="card-image" style="background-image: url('${rest.image}')">
                        ${rest.rating ? `<span class="card-rating-badge">‚≠ê ${rest.rating}</span>` : ''}
                    </div>
                    <div class="card-body">
                        <h3>${rest.name}</h3>
                        <p class="card-cuisine">${rest.cuisine}</p>
                        <p class="card-phone">${rest.phone || ''}</p>
                        <button class="view-details-btn">∆ètraflƒ± Bax</button>
                    </div>
                </div>
            `).join('');

            // Activities - klik edil…ô bil…ôn
            const activitiesGrid = document.getElementById('activitiesGrid');
            activitiesGrid.innerHTML = mountain.activities.map(act => `
                <div class="activity-card clickable" onclick="openActivityModal('${act.name}')">
                    <span class="activity-icon">${act.icon}</span>
                    <h3>${act.name}</h3>
                    <p>${act.description}</p>
                </div>
            `).join('');

            // Transport - klik edil…ô bil…ôn
            window.currentTransportData = mountain.transport;
            window.currentRoutes = mountain.routes;
            const transportGrid = document.getElementById('transportGrid');
            transportGrid.innerHTML = mountain.transport.map((t, index) => `
                <div class="transport-item clickable" onclick="openTransportModal('${t}', ${index})">
                    <span class="transport-icon">${getTransportIcon(t)}</span>
                    <span>${t}</span>
                </div>
            `).join('');

            // Routes
            const routeInfoCards = document.getElementById('routeInfoCards');
            routeInfoCards.innerHTML = mountain.routes.map(route => `
                <div class="route-card">
                    <span class="route-icon">${route.icon}</span>
                    <div class="route-details">
                        <h4>${route.type}</h4>
                        <p class="route-duration">‚è±Ô∏è ${route.duration}</p>
                        <p class="route-path">üìç ${route.path}</p>
                    </div>
                </div>
            `).join('');
        }

        // ==========================================
        // RESTAURANT MODAL SYSTEM
        // ==========================================
        let selectedRestaurant = null;

        function openRestaurantModal(index) {
            const rest = window.currentRestaurants[index];
            if (!rest) return;
            
            selectedRestaurant = rest;
            
            // Populate modal
            document.getElementById('restModalImage').style.backgroundImage = `url('${rest.image}')`;
            document.getElementById('restModalName').textContent = rest.name;
            document.getElementById('restModalCuisine').textContent = rest.cuisine;
            document.getElementById('restModalPrice').textContent = rest.price;
            document.getElementById('restModalDescription').textContent = rest.description || 'Restoran haqqƒ±nda …ôtraflƒ± m…ôlumat.';
            document.getElementById('restModalAddress').textContent = rest.address || '√únvan m√∂vcud deyil';
            document.getElementById('restModalPhone').textContent = rest.phone || 'Telefon m√∂vcud deyil';
            document.getElementById('restModalHours').textContent = rest.hours || 'ƒ∞≈ü saatlarƒ± m√∂vcud deyil';
            
            // Rating
            const rating = rest.rating || 4.0;
            document.getElementById('restModalRating').textContent = rating;
            const fullStars = Math.floor(rating);
            document.getElementById('restModalStars').textContent = '‚≠ê'.repeat(fullStars);
            
            // Features
            const featuresContainer = document.getElementById('restModalFeatures');
            if (rest.features && rest.features.length > 0) {
                featuresContainer.innerHTML = rest.features.map(f => `<span class="feature-tag">${f}</span>`).join('');
            } else {
                featuresContainer.innerHTML = '<span class="feature-tag">Restoran</span>';
            }
            
            // Phone link
            document.getElementById('restCallBtn').href = `tel:${rest.phone?.replace(/\s/g, '') || ''}`;
            
            // Directions link
            const address = encodeURIComponent(rest.address || rest.name);
            document.getElementById('restDirectionsBtn').href = `https://www.google.com/maps/search/?api=1&query=${address}`;
            
            // Reset views
            document.querySelector('.restaurant-details').style.display = 'block';
            document.getElementById('reservationForm').style.display = 'none';
            document.getElementById('reservationConfirmed').style.display = 'none';
            
            // Show modal
            document.getElementById('restaurantModal').classList.add('active');
        }

        function closeRestaurantModal() {
            document.getElementById('restaurantModal').classList.remove('active');
        }

        // Reservation form toggle
        document.getElementById('restReserveBtn').addEventListener('click', function() {
            document.querySelector('.restaurant-details').style.display = 'none';
            document.getElementById('reservationForm').style.display = 'block';
            
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('reserveDate').min = today;
            document.getElementById('reserveDate').value = today;
        });

        document.getElementById('cancelReserve').addEventListener('click', function() {
            document.querySelector('.restaurant-details').style.display = 'block';
            document.getElementById('reservationForm').style.display = 'none';
        });

        // Reservation form submit
        document.getElementById('tableReservationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const reservationData = {
                restaurant: selectedRestaurant.name,
                date: document.getElementById('reserveDate').value,
                time: document.getElementById('reserveTime').value,
                guests: document.getElementById('reserveGuests').value,
                name: document.getElementById('reserveName').value,
                phone: document.getElementById('reservePhone').value,
                note: document.getElementById('reserveNote').value
            };
            
            // Show confirmation
            document.getElementById('confirmRestName').textContent = reservationData.restaurant;
            document.getElementById('confirmDate').textContent = new Date(reservationData.date).toLocaleDateString('az-AZ');
            document.getElementById('confirmTime').textContent = reservationData.time;
            document.getElementById('confirmGuests').textContent = reservationData.guests + ' n…ôf…ôr';
            
            document.getElementById('reservationForm').style.display = 'none';
            document.getElementById('reservationConfirmed').style.display = 'block';
            
            // Reset form
            document.getElementById('tableReservationForm').reset();
        });

        // Close modal on outside click
        document.getElementById('restaurantModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeRestaurantModal();
            }
        });

        document.getElementById('closeRestaurantModal').addEventListener('click', closeRestaurantModal);

        // ==========================================
        // BOOKING SYSTEM
        // ==========================================
        let selectedHotel = null;
        let bookingData = {};

        function openBookingModal(hotelName, hotelPrice, hotelRating) {
            selectedHotel = {
                name: hotelName,
                price: hotelPrice,
                rating: hotelRating,
                pricePerNight: parseInt(hotelPrice.replace(/[^\d]/g, '')) || 100
            };
            
            document.getElementById('selectedHotelName').textContent = hotelName;
            document.getElementById('summaryHotel').textContent = hotelName;
            
            // Tarix default-larƒ±
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dayAfter = new Date(today);
            dayAfter.setDate(dayAfter.getDate() + 2);
            
            document.getElementById('checkInDate').min = today.toISOString().split('T')[0];
            document.getElementById('checkInDate').value = tomorrow.toISOString().split('T')[0];
            document.getElementById('checkOutDate').min = tomorrow.toISOString().split('T')[0];
            document.getElementById('checkOutDate').value = dayAfter.toISOString().split('T')[0];
            
            updateBookingSummary();
            
            // Modalƒ± g√∂st…ôr
            document.getElementById('bookingModal').classList.add('active');
            document.getElementById('bookingStep1').style.display = 'block';
            document.getElementById('bookingStep2').style.display = 'none';
            document.getElementById('bookingStep3').style.display = 'none';
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.remove('active');
        }

        function updateBookingSummary() {
            const checkIn = new Date(document.getElementById('checkInDate').value);
            const checkOut = new Date(document.getElementById('checkOutDate').value);
            const guests = document.getElementById('guestCount').value;
            const rooms = document.getElementById('roomCount').value;
            
            const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));
            const total = nights * selectedHotel.pricePerNight * rooms;
            
            document.getElementById('summaryNights').textContent = `${nights} gec…ô`;
            document.getElementById('summaryGuests').textContent = `${guests} n…ôf…ôr, ${rooms} otaq`;
            document.getElementById('summaryTotal').textContent = `‚Çº${total}`;
            
            bookingData = {
                hotel: selectedHotel.name,
                checkIn: checkIn,
                checkOut: checkOut,
                nights: nights,
                guests: guests,
                rooms: rooms,
                total: total
            };
        }

        // Event listeners for booking form
        document.getElementById('checkInDate').addEventListener('change', function() {
            const checkIn = new Date(this.value);
            const minCheckOut = new Date(checkIn);
            minCheckOut.setDate(minCheckOut.getDate() + 1);
            document.getElementById('checkOutDate').min = minCheckOut.toISOString().split('T')[0];
            
            if (new Date(document.getElementById('checkOutDate').value) <= checkIn) {
                document.getElementById('checkOutDate').value = minCheckOut.toISOString().split('T')[0];
            }
            updateBookingSummary();
        });

        document.getElementById('checkOutDate').addEventListener('change', updateBookingSummary);
        document.getElementById('guestCount').addEventListener('change', updateBookingSummary);
        document.getElementById('roomCount').addEventListener('change', updateBookingSummary);

        // Booking form submit - go to payment
        document.getElementById('hotelBookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            bookingData.name = document.getElementById('guestName').value;
            bookingData.email = document.getElementById('guestEmail').value;
            bookingData.phone = document.getElementById('guestPhone').value;
            bookingData.requests = document.getElementById('specialRequests').value;
            
            // Update payment summary
            document.getElementById('paymentHotel').textContent = bookingData.hotel;
            document.getElementById('paymentDates').textContent = 
                `${bookingData.checkIn.toLocaleDateString('az-AZ')} - ${bookingData.checkOut.toLocaleDateString('az-AZ')}`;
            document.getElementById('paymentTotal').textContent = `‚Çº${bookingData.total}`;
            
            // Show payment step
            document.getElementById('bookingStep1').style.display = 'none';
            document.getElementById('bookingStep2').style.display = 'block';
        });

        // Payment method selection
        document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('active'));
                this.parentElement.classList.add('active');
                
                if (this.value === 'card') {
                    document.getElementById('cardPayment').style.display = 'block';
                    document.getElementById('cashPayment').style.display = 'none';
                } else {
                    document.getElementById('cardPayment').style.display = 'none';
                    document.getElementById('cashPayment').style.display = 'block';
                }
            });
        });

        // Back to booking
        document.getElementById('backToBooking').addEventListener('click', function() {
            document.getElementById('bookingStep1').style.display = 'block';
            document.getElementById('bookingStep2').style.display = 'none';
        });

        // Card number formatting
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '').replace(/\D/g, '');
            let formatted = value.match(/.{1,4}/g)?.join(' ') || value;
            e.target.value = formatted;
        });

        // Expiry date formatting
        document.getElementById('cardExpiry').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2);
            }
            e.target.value = value;
        });

        // Payment form submit
        document.getElementById('paymentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            
            if (paymentMethod === 'card') {
                const cardNumber = document.getElementById('cardNumber').value;
                const expiry = document.getElementById('cardExpiry').value;
                const cvv = document.getElementById('cardCvv').value;
                const holder = document.getElementById('cardHolder').value;
                
                if (!cardNumber || !expiry || !cvv || !holder) {
                    alert('Z…ôhm…ôt olmasa b√ºt√ºn kart m…ôlumatlarƒ±nƒ± doldurun');
                    return;
                }
            }
            
            // Generate order number
            const orderNumber = 'DT-' + Date.now().toString().slice(-6);
            
            // Show confirmation
            document.getElementById('orderNumber').textContent = orderNumber;
            document.getElementById('confHotel').textContent = bookingData.hotel;
            document.getElementById('confDates').textContent = 
                `${bookingData.checkIn.toLocaleDateString('az-AZ')} - ${bookingData.checkOut.toLocaleDateString('az-AZ')}`;
            document.getElementById('confAmount').textContent = `‚Çº${bookingData.total}`;
            document.getElementById('confEmail').textContent = bookingData.email;
            
            // Save to localStorage (user bookings)
            saveBooking(orderNumber, paymentMethod);
            
            document.getElementById('bookingStep2').style.display = 'none';
            document.getElementById('bookingStep3').style.display = 'block';
        });

        // Save booking to user's account
        function saveBooking(orderNumber, paymentMethod) {
            const CURRENT_USER_KEY = 'peakexplorer_current_user';
            const USERS_KEY = 'peakexplorer_users';
            
            const currentUser = localStorage.getItem(CURRENT_USER_KEY);
            if (currentUser) {
                const user = JSON.parse(currentUser);
                const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');
                
                const booking = {
                    id: orderNumber,
                    tourName: bookingData.hotel,
                    date: `${bookingData.checkIn.toLocaleDateString('az-AZ')} - ${bookingData.checkOut.toLocaleDateString('az-AZ')}`,
                    participants: bookingData.guests,
                    price: bookingData.total,
                    status: paymentMethod === 'card' ? 'confirmed' : 'pending',
                    createdAt: new Date().toISOString()
                };
                
                user.bookings = user.bookings || [];
                user.bookings.push(booking);
                
                localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));
                
                // Update users array
                const userIndex = users.findIndex(u => u.id === user.id);
                if (userIndex !== -1) {
                    users[userIndex].bookings = user.bookings;
                    localStorage.setItem(USERS_KEY, JSON.stringify(users));
                }
            }
        }

        // Close modal on outside click
        document.getElementById('bookingModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBookingModal();
            }
        });

        document.getElementById('closeBookingModal').addEventListener('click', closeBookingModal);

        // ==========================================
        // ACTIVITY MODAL SYSTEM
        // ==========================================
        const activitiesData = {
            'Alpinizm': {
                icon: 'üßó',
                desc: 'Alpinizm daƒülarƒ±n zirv…ôl…ôrin…ô qalxmaq s…ôn…ôtidir. Professional avadanlƒ±q v…ô t…ôcr√ºb…ô t…ôl…ôb edir.',
                duration: '2-7 g√ºn',
                difficulty: 'M√ºr…ôkk…ôb',
                price: '‚Çº500-1500',
                group: '5-12 n…ôf…ôr',
                requirements: ['Fiziki hazƒ±rlƒ±q', '∆èsas alpinizm t…ôcr√ºb…ôsi', 'Tibbi arayƒ±≈ü', '18 ya≈üdan yuxarƒ±'],
                equipment: ['ƒ∞p', 'Karabinl…ôr', 'Alpinizm ayaqqabƒ±sƒ±', 'Kaska', 'Buz baltasƒ±']
            },
            'Trekking': {
                icon: 'ü•æ',
                desc: 'Uzun m…ôsaf…ôli piyada g…ôzintil…ôr daƒü cƒ±ƒüƒ±rlarƒ± boyunca.',
                duration: '1-5 g√ºn',
                difficulty: 'Orta',
                price: '‚Çº100-400',
                group: '5-20 n…ôf…ôr',
                requirements: ['Yax≈üƒ± fiziki forma', 'Rahat g…ôzinti ayaqqabƒ±sƒ±'],
                equipment: ['Trekking √ßubuqlarƒ±', 'Bel √ßantasƒ±', 'Su qabƒ±', 'G√ºn…ô≈ü eyn…ôyi']
            },
            'Foto-tur': {
                icon: 'üì∏',
                desc: 'Professional fotoqraflar m√º≈üayi…ôti il…ô daƒü m…ônz…ôr…ôl…ôrinin √ß…ôkili≈üi.',
                duration: '1-3 g√ºn',
                difficulty: 'Asan',
                price: '‚Çº200-600',
                group: '3-10 n…ôf…ôr',
                requirements: ['Fotoaparat (ist…ônil…ôn n√∂v)'],
                equipment: ['Kamera', 'Tripod', '∆èlav…ô batareya', 'Yadda≈ü kartlarƒ±']
            },
            'D√º≈ü…ôrg…ô': {
                icon: '‚õ∫',
                desc: 'Daƒü …ôt…ôkl…ôrind…ô √ßadƒ±r qurub gec…ôl…ôm…ôk.',
                duration: '1-4 gec…ô',
                difficulty: 'Asan',
                price: '‚Çº80-250',
                group: '4-15 n…ôf…ôr',
                requirements: ['Yuxu tulumu', 'ƒ∞sti geyim'],
                equipment: ['√áadƒ±r', 'Yuxu tulumu', 'Karimat', 'F…ôn…ôr', 'Bƒ±√ßaq']
            },
            'Xiz…ôk': {
                icon: '‚õ∑Ô∏è',
                desc: 'Qƒ±≈ü m√∂vs√ºm√ºnd…ô daƒü xiz…ôyi.',
                duration: '1-7 g√ºn',
                difficulty: 'M√ºxt…ôlif',
                price: '‚Çº150-800',
                group: '1-20 n…ôf…ôr',
                requirements: ['∆èsas xiz…ôk bacarƒ±ƒüƒ±'],
                equipment: ['Xiz…ôk', '√áubuqlar', 'Botlar', 'Kaska', 'Xiz…ôk geyimi']
            },
            'Snowboard': {
                icon: 'üèÇ',
                desc: 'Qar √ºz…ôrind…ô s√ºr√º≈üm…ô taxtasƒ± il…ô ekstremal idman.',
                duration: '1-7 g√ºn',
                difficulty: 'Orta-M√ºr…ôkk…ôb',
                price: '‚Çº200-900',
                group: '1-15 n…ôf…ôr',
                requirements: ['Balans bacarƒ±ƒüƒ±'],
                equipment: ['Snowboard', 'Botlar', 'Kaska', 'Qoruyucu geyim']
            },
            'Paraqlaydinq': {
                icon: 'ü™Ç',
                desc: 'Daƒü zirv…ôl…ôrind…ôn para≈ü√ºtl…ô u√ßu≈ü.',
                duration: '15-45 d…ôqiq…ô u√ßu≈ü',
                difficulty: 'Orta',
                price: '‚Çº150-350',
                group: 'F…ôrdi/Tandem',
                requirements: ['√á…ôki limiti: 40-100 kq', '√úr…ôk x…ôst…ôliyi olmamalƒ±'],
                equipment: ['Para≈ü√ºt (t…ômin edilir)', 'Kaska', 'Qoruyucu geyim']
            },
            'Kanat yolu': {
                icon: 'üö°',
                desc: 'Panoramik kanat yolu il…ô daƒü m…ônz…ôr…ôl…ôrini seyr etm…ôk.',
                duration: '15-30 d…ôqiq…ô',
                difficulty: 'Asan',
                price: '‚Çº20-50',
                group: '1-6 n…ôf…ôr (kabin)',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['ƒ∞sti geyim (qƒ±≈üda)']
            },
            'Zipline': {
                icon: 'üéø',
                desc: 'Ekstremal zipline il…ô d…ôr…ôl…ôr √ºz…ôrind…ôn u√ßu≈ü.',
                duration: '5-15 d…ôqiq…ô',
                difficulty: 'Orta',
                price: '‚Çº30-80',
                group: 'F…ôrdi',
                requirements: ['√á…ôki limiti: 40-120 kq'],
                equipment: ['Kaska (t…ômin edilir)', 'Qoruyucu k…ôm…ôr']
            },
            'At g…ôzintisi': {
                icon: 'üê¥',
                desc: 'Atla daƒü g…ôzintisi.',
                duration: '1-4 saat',
                difficulty: 'Asan',
                price: '‚Çº50-150',
                group: '2-10 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôcr√ºb…ô t…ôl…ôb olunmur'],
                equipment: ['Rahat geyim', 'Kaska (t…ômin edilir)']
            },
            'ATV Turu': {
                icon: 'üèçÔ∏è',
                desc: 'ATV il…ô daƒü mac…ôrasƒ±.',
                duration: '1-3 saat',
                difficulty: 'Orta',
                price: '‚Çº80-200',
                group: '2-8 n…ôf…ôr',
                requirements: ['S√ºr√ºc√ºl√ºk v…ôsiq…ôsi (18+)'],
                equipment: ['Kaska', 'Qoruyucu geyim']
            },
            'Ziyar…ôt': {
                icon: 'üôè',
                desc: 'M√ºq…ôdd…ôs yerl…ôrin ziyar…ôti.',
                duration: '1 g√ºn',
                difficulty: 'Asan',
                price: '‚Çº50-100',
                group: '5-30 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['Rahat ayaqqabƒ±']
            },
            'Meditasiya': {
                icon: 'üßò',
                desc: 'Daƒü t…ôbi…ôtind…ô m…ôn…ôvi t…ôcr√ºb…ô.',
                duration: '1-3 saat',
                difficulty: 'Asan',
                price: '‚Çº30-80',
                group: '5-15 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['Rahat geyim', 'Yoga xal√ßasƒ±']
            },
            'M…ôd…ôni tur': {
                icon: 'üèõÔ∏è',
                desc: 'Yerli m…ôd…ôniyy…ôt v…ô tarix turu.',
                duration: '3-6 saat',
                difficulty: 'Asan',
                price: '‚Çº40-120',
                group: '5-20 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['Kamera', 'Rahat ayaqqabƒ±']
            },
            'Etnoqrafiya': {
                icon: 'üé≠',
                desc: 'Yerli ad…ôt-…ôn…ôn…ôl…ôri √∂yr…ônm…ô.',
                duration: '2-4 saat',
                difficulty: 'Asan',
                price: '‚Çº30-80',
                group: '5-15 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['Qeyd d…ôft…ôri', 'Kamera']
            },
            'S…ôn…ôtkarlƒ±q': {
                icon: 'üß∂',
                desc: 'Yerli s…ôn…ôt n√ºmun…ôl…ôri il…ô tanƒ±≈ülƒ±q.',
                duration: '2-3 saat',
                difficulty: 'Asan',
                price: '‚Çº20-50',
                group: '5-10 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: []
            },
            'Muzey ziyar…ôti': {
                icon: 'üèõÔ∏è',
                desc: 'Muzey v…ô tarixi yerl…ôrin ziyar…ôti.',
                duration: '1-2 saat',
                difficulty: 'Asan',
                price: '‚Çº5-20',
                group: '1-50 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['Kamera']
            },
            'Petroqlifl…ôr': {
                icon: 'ü™®',
                desc: 'Q…ôdim qaya√ºst√º r…ôsml…ôrin t…ôdqiqi.',
                duration: '2-3 saat',
                difficulty: 'Asan',
                price: '‚Çº10-30',
                group: '5-30 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['Kamera', 'G√ºn…ô≈ü eyn…ôyi']
            },
            'Vulkanlar': {
                icon: 'üåã',
                desc: 'Pal√ßƒ±q vulkanlarƒ±nƒ±n m√º≈üahid…ôsi.',
                duration: '1-2 saat',
                difficulty: 'Asan',
                price: '‚Çº10-25',
                group: '5-30 n…ôf…ôr',
                requirements: ['X√ºsusi t…ôl…ôb yoxdur'],
                equipment: ['Rahat ayaqqabƒ±']
            }
        };

        function openActivityModal(activityName) {
            const activity = activitiesData[activityName];
            if (!activity) {
                document.getElementById('activityModalIcon').textContent = 'üèîÔ∏è';
                document.getElementById('activityModalName').textContent = activityName;
                document.getElementById('activityModalDesc').textContent = 'Bu f…ôaliyy…ôt haqqƒ±nda …ôtraflƒ± m…ôlumat tezlikl…ô …ôlav…ô olunacaq.';
                document.getElementById('activityModalDuration').textContent = '-';
                document.getElementById('activityModalDifficulty').textContent = '-';
                document.getElementById('activityModalPrice').textContent = '-';
                document.getElementById('activityModalGroup').textContent = '-';
                document.getElementById('activityModalRequirements').innerHTML = '';
                document.getElementById('activityModalEquipment').innerHTML = '';
                document.getElementById('activityModal').classList.add('active');
                return;
            }

            document.getElementById('activityModalIcon').textContent = activity.icon;
            document.getElementById('activityModalName').textContent = activityName;
            document.getElementById('activityModalDesc').textContent = activity.desc;
            document.getElementById('activityModalDuration').textContent = activity.duration;
            document.getElementById('activityModalDifficulty').textContent = activity.difficulty;
            document.getElementById('activityModalPrice').textContent = activity.price;
            document.getElementById('activityModalGroup').textContent = activity.group;
            
            document.getElementById('activityModalRequirements').innerHTML = activity.requirements.map(req => 
                `<li>${req}</li>`
            ).join('');
            
            document.getElementById('activityModalEquipment').innerHTML = activity.equipment.map(eq => 
                `<span class="equipment-tag">${eq}</span>`
            ).join('');

            document.getElementById('activityModal').classList.add('active');
        }

        function closeActivityModal() {
            document.getElementById('activityModal').classList.remove('active');
        }

        document.getElementById('activityModal')?.addEventListener('click', function(e) {
            if (e.target === this) closeActivityModal();
        });

        // ==========================================
        // TOUR BOOKING SYSTEM
        // ==========================================
        let currentMountainData = null;
        let tourBookingData = {};

        function openTourBookingModal() {
            // Get current mountain from URL
            const urlParams = new URLSearchParams(window.location.search);
            const mountainId = urlParams.get('id') || 'shahdag';
            currentMountainData = mountainsData[mountainId];
            
            if (!currentMountainData) {
                currentMountainData = {
                    name: mountainId,
                    price: '‚Çº350'
                };
            }

            document.getElementById('tourBookingName').textContent = currentMountainData.name + ' Turu';
            document.getElementById('summaryTourName').textContent = currentMountainData.name;
            
            // Set minimum date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('tourDate').min = tomorrow.toISOString().split('T')[0];
            document.getElementById('tourDate').value = tomorrow.toISOString().split('T')[0];
            
            updateTourSummary();
            
            document.getElementById('tourBookingModal').classList.add('active');
            document.getElementById('tourStep1').style.display = 'block';
            document.getElementById('tourStep2').style.display = 'none';
        }

        function closeTourBookingModal() {
            document.getElementById('tourBookingModal').classList.remove('active');
        }

        function updateTourSummary() {
            const participants = parseInt(document.getElementById('tourParticipants').value) || 2;
            const tourType = document.getElementById('tourType').value;
            
            let basePrice = parseInt(currentMountainData?.price?.replace(/[^\d]/g, '')) || 350;
            
            // Adjust price based on tour type
            if (tourType === 'vip') {
                basePrice *= 1.5;
            } else if (tourType === 'group' && participants >= 4) {
                basePrice *= 0.9; // 10% discount for groups
            }
            
            const total = Math.round(basePrice * participants);
            
            document.getElementById('summaryParticipants').textContent = participants + ' n…ôf…ôr';
            document.getElementById('summaryTourTotal').textContent = '‚Çº' + total;
            
            tourBookingData.total = total;
            tourBookingData.participants = participants;
        }

        // Event listeners for tour booking
        document.getElementById('tourParticipants')?.addEventListener('change', updateTourSummary);
        document.getElementById('tourType')?.addEventListener('change', updateTourSummary);

        // Tour booking form submit
        document.getElementById('tourOrderForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            tourBookingData.tourName = currentMountainData?.name || 'Daƒü Turu';
            tourBookingData.date = document.getElementById('tourDate').value;
            tourBookingData.name = document.getElementById('tourGuestName').value;
            tourBookingData.email = document.getElementById('tourGuestEmail').value;
            tourBookingData.phone = document.getElementById('tourGuestPhone').value;
            tourBookingData.requests = document.getElementById('tourRequests').value;
            tourBookingData.type = document.getElementById('tourType').value;
            
            // Generate order number
            const orderNumber = 'DT-' + Date.now().toString().slice(-6);
            
            // Show confirmation
            document.getElementById('tourOrderNumber').textContent = orderNumber;
            document.getElementById('confTourName').textContent = tourBookingData.tourName + ' Turu';
            document.getElementById('confTourDate').textContent = new Date(tourBookingData.date).toLocaleDateString('az-AZ');
            document.getElementById('confTourParticipants').textContent = tourBookingData.participants + ' n…ôf…ôr';
            document.getElementById('confTourAmount').textContent = '‚Çº' + tourBookingData.total;
            document.getElementById('confTourEmail').textContent = tourBookingData.email;
            
            // Save to localStorage
            saveTourBooking(orderNumber);
            
            document.getElementById('tourStep1').style.display = 'none';
            document.getElementById('tourStep2').style.display = 'block';
            
            // Sifari≈ü t…ôsdiql…ôndi bildiri≈üi
            showNotification('‚úÖ Sifari≈ü uƒüurla t…ôsdiql…ôndi!', 'success');
        });

        function saveTourBooking(orderNumber) {
            const CURRENT_USER_KEY = 'peakexplorer_current_user';
            const USERS_KEY = 'peakexplorer_users';
            
            const currentUser = localStorage.getItem(CURRENT_USER_KEY);
            if (currentUser) {
                const user = JSON.parse(currentUser);
                const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');
                
                const booking = {
                    id: orderNumber,
                    tourName: tourBookingData.tourName + ' Turu',
                    date: new Date(tourBookingData.date).toLocaleDateString('az-AZ'),
                    participants: tourBookingData.participants,
                    price: tourBookingData.total,
                    status: 'pending',
                    createdAt: new Date().toISOString()
                };
                
                user.bookings = user.bookings || [];
                user.bookings.push(booking);
                
                localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));
                
                const userIndex = users.findIndex(u => u.id === user.id);
                if (userIndex !== -1) {
                    users[userIndex].bookings = user.bookings;
                    localStorage.setItem(USERS_KEY, JSON.stringify(users));
                }
            }
        }

        // Close modal on outside click
        document.getElementById('tourBookingModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeTourBookingModal();
            }
        });

        // ==========================================
        // TRANSPORT MODAL SYSTEM
        // ==========================================
        const transportData = {
            'Jeep transfer': {
                icon: 'üöô',
                desc: '4x4 jeep il…ô daƒü yollarƒ±nda rahat s…ôyah…ôt. Professional s√ºr√ºc√ºl…ôr v…ô t…ôhl√ºk…ôsiz avtomobill…ôr.',
                duration: '2-4 saat',
                price: '‚Çº80-150',
                tips: [
                    '∆èvv…ôlc…ôd…ôn rezervasiya t√∂vsiy…ô olunur',
                    'Qrup √º√ß√ºn endirim m√∂vcuddur',
                    'S√ºr√ºc√º b…ôl…ôd√ßi kimi d…ô xidm…ôt g√∂st…ôr…ô bil…ôr',
                    'Yol boyu dayanacaqlar m√ºmk√ºnd√ºr'
                ],
                contacts: [
                    { name: 'Qusar Jeep Transfer', phone: '+994 50 123 45 67' },
                    { name: 'Daƒü Yollarƒ±', phone: '+994 55 234 56 78' }
                ]
            },
            'Avtobus': {
                icon: 'üöå',
                desc: 'Rahat avtobus reysi il…ô ≈ü…ôh…ôrl…ôrarasƒ± s…ôyah…ôt. ∆èn s…ôrf…ôli se√ßim.',
                duration: '3-5 saat',
                price: '‚Çº10-25',
                tips: [
                    'Bakƒ± Avtovaƒüzalƒ±ndan d√ºzenli reysler',
                    'Biletl…ôri …ôvv…ôlc…ôd…ôn almaq t√∂vsiy…ô olunur',
                    'Y√ºk √º√ß√ºn …ôlav…ô yer m√∂vcuddur',
                    'Kondisioner v…ô WiFi var'
                ],
                contacts: [
                    { name: 'Bakƒ± Avtovaƒüzalƒ±', phone: '+994 12 119' }
                ]
            },
            'Taksi': {
                icon: 'üöï',
                desc: 'F…ôrdi taksi xidm…ôti. Rahatlƒ±q v…ô √ßeviklik.',
                duration: '2-4 saat',
                price: '‚Çº100-200',
                tips: [
                    'Bolt v…ô Uber t…ôtbiql…ôri m√∂vcuddur',
                    'Qiym…ôti …ôvv…ôlc…ôd…ôn razƒ±la≈üdƒ±rƒ±n',
                    'Uzun m…ôsaf…ô √º√ß√ºn sabit qiym…ôt soru≈üun'
                ],
                contacts: [
                    { name: 'Bolt', phone: 'T…ôtbiq vasit…ôsil…ô' },
                    { name: 'Uber', phone: 'T…ôtbiq vasit…ôsil…ô' }
                ]
            },
            '≈û…ôxsi avtomobil': {
                icon: 'üöó',
                desc: '√ñz avtomobilinizl…ô s…ôyah…ôt. Tam azadlƒ±q v…ô √ßeviklik.',
                duration: 'Mar≈üruta g√∂r…ô',
                price: 'Yanacaq x…ôrci',
                tips: [
                    'GPS naviqasiya istifad…ô edin',
                    'Daƒü yollarƒ± √º√ß√ºn 4x4 t√∂vsiy…ô olunur',
                    'Ehtiyat t…ôk…ôr v…ô al…ôtl…ôr g√∂t√ºr√ºn',
                    'Yanacaq stansiyalarƒ±nƒ± …ôvv…ôlc…ôd…ôn planla≈üdƒ±rƒ±n'
                ],
                contacts: []
            },
            'Transfer xidm…ôti': {
                icon: 'üöê',
                desc: 'Otel v…ô ya turoperator t…ôr…ôfind…ôn t…ô≈ükil edil…ôn transfer.',
                duration: 'Mar≈üruta g√∂r…ô',
                price: '‚Çº50-100',
                tips: [
                    'Otel bronunda daxil ola bil…ôr',
                    'Qrup transferl…ôri daha s…ôrf…ôlidir',
                    'Vaxtƒ±nda hazƒ±r olun'
                ],
                contacts: [
                    { name: 'Otel resepsiyasƒ±', phone: 'Oteliniz…ô m√ºraci…ôt edin' }
                ]
            },
            'Kanat yolu': {
                icon: 'üö°',
                desc: 'Panoramik kanat yolu il…ô daƒüa qalxƒ±≈ü. Heyr…ôtamiz m…ônz…ôr…ôl…ôr.',
                duration: '15-30 d…ôqiq…ô',
                price: '‚Çº20-50',
                tips: [
                    'Hava ≈ü…ôraitind…ôn asƒ±lƒ±dƒ±r',
                    'Biletl…ôri yerind…ô almaq olar',
                    'Kamera g√∂t√ºrm…ôyi unutmayƒ±n',
                    'K√ºl…ôkli havalarda baƒülƒ± ola bil…ôr'
                ],
                contacts: [
                    { name: '≈ûahdaƒü Kanat Yolu', phone: '+994 12 404 04 04' },
                    { name: 'Tufandaƒü Kanat Yolu', phone: '+994 24 205 55 55' }
                ]
            },
            '4x4 avtomobil': {
                icon: 'üöô',
                desc: '√á…ôtin daƒü yollarƒ± √º√ß√ºn 4x4 avtomobil icar…ôsi.',
                duration: 'Mar≈üruta g√∂r…ô',
                price: '‚Çº150-300/g√ºn',
                tips: [
                    'S√ºr√ºc√ºl√ºk v…ôsiq…ôsi t…ôl…ôb olunur',
                    'Sƒ±ƒüorta daxildir',
                    'Yanacaq …ôlav…ô √∂d…ônilir',
                    '∆èvv…ôlc…ôd…ôn rezervasiya edin'
                ],
                contacts: [
                    { name: 'Rent a Car Baku', phone: '+994 50 345 67 89' }
                ]
            },
            'Piyada': {
                icon: 'ü•æ',
                desc: 'Piyada trekking mar≈ürutu. T…ôbi…ôtl…ô ba≈ü-ba≈üa.',
                duration: 'Mar≈üruta g√∂r…ô',
                price: 'Pulsuz',
                tips: [
                    'Rahat trekking ayaqqabƒ±sƒ± geyinin',
                    'Kifay…ôt q…ôd…ôr su g√∂t√ºr√ºn',
                    'X…ôrit…ô v…ô ya GPS istifad…ô edin',
                    'Hava proqnozunu yoxlayƒ±n',
                    'B…ôl…ôd√ßi il…ô getm…ôk t√∂vsiy…ô olunur'
                ],
                contacts: []
            },
            'At il…ô': {
                icon: 'üê¥',
                desc: 'Atla daƒü s…ôyah…ôti. ∆èn…ôn…ôvi v…ô romantik.',
                duration: 'Mar≈üruta g√∂r…ô',
                price: '‚Çº50-100',
                tips: [
                    'T…ôcr√ºb…ô t…ôl…ôb olunmur',
                    'B…ôl…ôd√ßi il…ô birlikd…ô',
                    'Rahat geyim geyinin'
                ],
                contacts: [
                    { name: 'Yerli b…ôl…ôd√ßil…ôr', phone: 'K…ôndd…ô soru≈üun' }
                ]
            }
        };

        function getTransportIcon(transportName) {
            const icons = {
                'Jeep': 'üöô',
                'Avtobus': 'üöå',
                'Taksi': 'üöï',
                '≈û…ôxsi': 'üöó',
                'Transfer': 'üöê',
                'Kanat': 'üö°',
                '4x4': 'üöô',
                'Piyada': 'ü•æ',
                'At': 'üê¥'
            };
            
            for (const [key, icon] of Object.entries(icons)) {
                if (transportName.toLowerCase().includes(key.toLowerCase())) {
                    return icon;
                }
            }
            return 'üöó';
        }

        function findTransportData(transportName) {
            // Exact match first
            if (transportData[transportName]) {
                return transportData[transportName];
            }
            
            // Partial match
            for (const [key, data] of Object.entries(transportData)) {
                if (transportName.toLowerCase().includes(key.toLowerCase()) || 
                    key.toLowerCase().includes(transportName.toLowerCase().split(' ')[0])) {
                    return data;
                }
            }
            
            // Default
            return {
                icon: getTransportIcon(transportName),
                desc: `${transportName} il…ô daƒüa √ßatmaq m√ºmk√ºnd√ºr.`,
                duration: 'Mar≈üruta g√∂r…ô d…ôyi≈üir',
                price: 'Sorƒüu il…ô',
                tips: ['∆èvv…ôlc…ôd…ôn planla≈üdƒ±rƒ±n', 'Yerli ≈ü…ôrtl…ôri √∂yr…ônin'],
                contacts: []
            };
        }

        function openTransportModal(transportName, index) {
            const data = findTransportData(transportName);
            const routes = window.currentRoutes || [];
            
            document.getElementById('transportModalIcon').textContent = data.icon;
            document.getElementById('transportModalName').textContent = transportName;
            document.getElementById('transportModalDesc').textContent = data.desc;
            document.getElementById('transportModalDuration').textContent = data.duration;
            document.getElementById('transportModalPrice').textContent = data.price;
            
            // Route info
            const routeContainer = document.getElementById('transportModalRoute');
            if (routes.length > 0) {
                routeContainer.innerHTML = routes.map(r => `
                    <div class="route-step">
                        <span class="route-step-icon">${r.icon}</span>
                        <div class="route-step-info">
                            <strong>${r.type}</strong>
                            <p>‚è±Ô∏è ${r.duration}</p>
                            <p>üìç ${r.path}</p>
                        </div>
                    </div>
                `).join('');
            } else {
                routeContainer.innerHTML = '<p>Mar≈ürut m…ôlumatƒ± m√∂vcud deyil.</p>';
            }
            
            // Tips
            document.getElementById('transportModalTips').innerHTML = data.tips.map(tip => 
                `<li>${tip}</li>`
            ).join('');
            
            // Contacts
            const contactsSection = document.getElementById('transportContactsSection');
            const contactsContainer = document.getElementById('transportModalContacts');
            if (data.contacts && data.contacts.length > 0) {
                contactsSection.style.display = 'block';
                contactsContainer.innerHTML = data.contacts.map(c => `
                    <div class="transport-contact">
                        <span class="contact-name">${c.name}</span>
                        <a href="tel:${c.phone.replace(/\s/g, '')}" class="contact-phone">${c.phone}</a>
                    </div>
                `).join('');
            } else {
                contactsSection.style.display = 'none';
            }
            
            document.getElementById('transportModal').classList.add('active');
        }

        function closeTransportModal() {
            document.getElementById('transportModal').classList.remove('active');
        }

        document.getElementById('transportModal')?.addEventListener('click', function(e) {
            if (e.target === this) closeTransportModal();
        });

        // Session management
        const CURRENT_USER_KEY = 'peakexplorer_current_user';
        
        function checkSession() {
            const savedUser = localStorage.getItem(CURRENT_USER_KEY);
            if (savedUser) {
                try {
                    const currentUser = JSON.parse(savedUser);
                    showUserProfileNav(currentUser);
                } catch (e) {
                    localStorage.removeItem(CURRENT_USER_KEY);
                }
            }
        }
        
        function showUserProfileNav(user) {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userProfile').style.display = 'flex';
            document.getElementById('userName').textContent = user.name;
            
            const avatarNav = document.getElementById('userAvatarNav');
            if (user.avatar) {
                avatarNav.innerHTML = `<img src="${user.avatar}" alt="Avatar" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
            } else {
                avatarNav.textContent = 'üë§';
            }
        }
        
        function logout() {
            localStorage.removeItem(CURRENT_USER_KEY);
            window.location.reload();
        }

        // Initialize session
        document.addEventListener('DOMContentLoaded', function() {
            checkSession();
            
            // Logout button
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', logout);
            }
            
            // Dropdown toggle
            document.querySelectorAll('.nav-dropdown-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const dropdown = this.closest('.nav-dropdown');
                    const isActive = dropdown.classList.contains('active');
                    document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('active'));
                    if (!isActive) dropdown.classList.add('active');
                });
            });
            
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.nav-dropdown')) {
                    document.querySelectorAll('.nav-dropdown').forEach(d => d.classList.remove('active'));
                }
            });
        });
    </script>
</body>
</html>

